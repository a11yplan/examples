<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WCAG 1.4.1 - Use of Color Test Page</title>

    <!-- Machine-readable metadata -->
    <meta name="test:wcag-criterion" content="1.4.1">
    <meta name="test:total-cases" content="10">
    <meta name="test:expected-violations" content="5">
    <meta name="test:expected-passes" content="5">

    <style>
        /* Base styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            color: #212529;
            border-bottom: 4px solid #0d6efd;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .header-info {
            background: #e7f1ff;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #0d6efd;
            margin-bottom: 30px;
        }

        .header-info p {
            margin: 5px 0;
            color: #495057;
        }

        .section-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 40px 0 20px 0;
        }

        .section-header h2 {
            margin: 0 0 5px 0;
        }

        .section-header p {
            margin: 0;
            opacity: 0.9;
        }

        /* Test grid - Independent grid pattern */
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .test-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 2px solid #dee2e6;
        }

        .test-card h3 {
            margin-top: 0;
            color: #212529;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge-fail { background-color: #dc3545; color: white; }
        .badge-pass { background-color: #198754; color: white; }

        .test-sample {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin: 15px 0;
            border: 1px solid #dee2e6;
        }

        .code-block {
            background-color: #2d2d2d;
            color: #d4d4d4;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin-top: 10px;
            overflow-x: auto;
        }

        /* TC1.1: Required field - color only */
        .tc1-required-color-only .required {
            color: #dc3545;
        }

        /* TC1.2: Error message - color only */
        .tc1-error-color-only {
            color: #dc3545;
            margin: 5px 0;
        }

        /* TC1.3: Status indicator - color only */
        .tc1-status-online {
            width: 10px;
            height: 10px;
            background-color: #198754;
            border-radius: 50%;
            display: inline-block;
        }

        .tc1-status-offline {
            width: 10px;
            height: 10px;
            background-color: #dc3545;
            border-radius: 50%;
            display: inline-block;
        }

        /* TC1.4: Link - color only */
        .tc1-link-color-only {
            color: #0d6efd;
            text-decoration: none;
        }

        /* TC1.5: Chart legend - color only */
        .tc1-chart-legend {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .tc1-legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .tc1-legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }

        /* TC2.1: Required field - asterisk + text */
        .tc2-required-icon::after {
            content: " *";
            color: #dc3545;
        }

        .tc2-required-text {
            color: #dc3545;
            font-size: 0.85em;
        }

        /* TC2.2: Error message - icon + text */
        .tc2-error-with-icon {
            color: #dc3545;
            margin: 5px 0;
        }

        .tc2-error-with-icon::before {
            content: "‚ö† ";
        }

        /* TC2.3: Status with icon */
        .tc2-status {
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .tc2-status-online {
            color: #198754;
        }

        .tc2-status-offline {
            color: #dc3545;
        }

        /* TC2.4: Link with underline */
        .tc2-link-underlined {
            color: #0d6efd;
            text-decoration: underline;
        }

        /* TC2.5: Chart with pattern + color */
        .tc2-chart-bar {
            display: inline-block;
            width: 40px;
            height: 80px;
            margin: 0 5px;
            position: relative;
        }

        .tc2-chart-bar.sales {
            background: repeating-linear-gradient(
                45deg,
                #0d6efd,
                #0d6efd 5px,
                #5c9eff 5px,
                #5c9eff 10px
            );
        }

        .tc2-chart-bar.revenue {
            background: repeating-linear-gradient(
                0deg,
                #198754,
                #198754 5px,
                #4caf77 5px,
                #4caf77 10px
            );
        }

        .expected-results {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-top: 40px;
            border: 2px solid #0d6efd;
        }

        .expected-results h3 {
            color: #0d6efd;
            margin-top: 0;
        }

        .expected-results ul {
            margin: 10px 0;
        }

        .expected-results li {
            margin: 8px 0;
            color: #495057;
        }

        .violation-list {
            list-style-type: none;
            padding-left: 20px;
        }

        .violation-list li {
            padding: 5px 0;
            border-left: 3px solid #dc3545;
            padding-left: 10px;
            margin: 5px 0;
            background: #fff5f5;
        }

        .pass-list {
            list-style-type: none;
            padding-left: 20px;
        }

        .pass-list li {
            padding: 5px 0;
            border-left: 3px solid #198754;
            padding-left: 10px;
            margin: 5px 0;
            background: #f0fff4;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® WCAG 1.4.1 - Use of Color Test Page</h1>

        <div class="header-info"
             data-wcag-criterion="1.4.1"
             data-total-test-cases="10"
             data-expected-violations="5"
             data-expected-passes="5">
            <p><strong>Testing: WCAG 1.4.1 - Use of Color (Level A)</strong></p>
            <p><strong>Requirement:</strong> Color is not used as the only visual means of conveying information, indicating an action, prompting a response, or distinguishing a visual element</p>
            <p><strong>Why it matters:</strong> Users who are color blind, have low vision, or use monochrome displays cannot perceive information conveyed by color alone.</p>
            <p>This page contains <strong>10 test cases</strong> (5 violations, 5 passes) demonstrating proper and improper use of color.</p>
        </div>

        <!-- CATEGORY 1: Clear Failures -->
        <div class="section-header">
            <h2>‚ùå Category 1: Color Used as Only Visual Indicator</h2>
            <p>Information conveyed through color alone - fails for color blind users</p>
        </div>

        <div class="test-grid">
            <!-- TC1.1: Required field - color only -->
            <div class="test-card"
                 data-test-id="TC1.1"
                 data-expected-result="violation"
                 data-wcag-criterion="1.4.1">
                <h3>TC1.1: Required Field (Color Only) <span class="badge badge-fail">FAIL</span></h3>
                <div class="test-sample">
                    <form class="tc1-required-color-only">
                        <label>
                            <span class="required">Email Address</span>
                            <input type="email" required>
                        </label>
                    </form>
                </div>
                <p><strong>Issue:</strong> Required field indicated only by red color. Users with red-green color blindness cannot identify required fields.</p>
                <div class="code-block">.required {
  color: #dc3545; /* Red color only - no asterisk or text */
}</div>
            </div>

            <!-- TC1.2: Error message - color only -->
            <div class="test-card"
                 data-test-id="TC1.2"
                 data-expected-result="violation"
                 data-wcag-criterion="1.4.1">
                <h3>TC1.2: Error Message (Color Only) <span class="badge badge-fail">FAIL</span></h3>
                <div class="test-sample">
                    <p class="tc1-error-color-only">Please enter a valid email address</p>
                </div>
                <p><strong>Issue:</strong> Error identified only by red text color. No icon, bold text, or other visual indicator.</p>
                <div class="code-block">.error {
  color: #dc3545; /* Red color only - no icon or emphasis */
}</div>
            </div>

            <!-- TC1.3: Status indicator - color only -->
            <div class="test-card"
                 data-test-id="TC1.3"
                 data-expected-result="violation"
                 data-wcag-criterion="1.4.1">
                <h3>TC1.3: Status Indicator (Color Only) <span class="badge badge-fail">FAIL</span></h3>
                <div class="test-sample">
                    <p><span class="tc1-status-online"></span> User A</p>
                    <p><span class="tc1-status-offline"></span> User B</p>
                </div>
                <p><strong>Issue:</strong> Online/offline status shown only with green/red dots. Color blind users cannot distinguish status.</p>
                <div class="code-block">.status-online {
  background-color: #198754; /* Green - no text label */
}
.status-offline {
  background-color: #dc3545; /* Red - no text label */
}</div>
            </div>

            <!-- TC1.4: Link - color only -->
            <div class="test-card"
                 data-test-id="TC1.4"
                 data-expected-result="violation"
                 data-wcag-criterion="1.4.1">
                <h3>TC1.4: Link (Color Only) <span class="badge badge-fail">FAIL</span></h3>
                <div class="test-sample">
                    <p>Please read our <a href="#" class="tc1-link-color-only">terms of service</a> before continuing.</p>
                </div>
                <p><strong>Issue:</strong> Link differentiated from text only by color (blue). No underline or other visual cue.</p>
                <div class="code-block">a {
  color: #0d6efd; /* Blue color only */
  text-decoration: none; /* No underline! */
}</div>
            </div>

            <!-- TC1.5: Chart legend - color only -->
            <div class="test-card"
                 data-test-id="TC1.5"
                 data-expected-result="violation"
                 data-wcag-criterion="1.4.1">
                <h3>TC1.5: Chart Legend (Color Only) <span class="badge badge-fail">FAIL</span></h3>
                <div class="test-sample">
                    <div class="tc1-chart-legend">
                        <div class="tc1-legend-item">
                            <div class="tc1-legend-color" style="background: #0d6efd;"></div>
                            <span>Sales</span>
                        </div>
                        <div class="tc1-legend-item">
                            <div class="tc1-legend-color" style="background: #198754;"></div>
                            <span>Revenue</span>
                        </div>
                    </div>
                </div>
                <p><strong>Issue:</strong> Chart data differentiated only by color (blue vs green). Color blind users cannot match legend to data.</p>
                <div class="code-block">/* Colors without patterns or labels in chart */
.sales-bar { background: #0d6efd; }
.revenue-bar { background: #198754; }</div>
            </div>
        </div>

        <!-- CATEGORY 2: Clear Passes -->
        <div class="section-header">
            <h2>‚úÖ Category 2: Color Plus Additional Visual Indicators</h2>
            <p>Information conveyed through color AND another visual means</p>
        </div>

        <div class="test-grid">
            <!-- TC2.1: Required field - asterisk + text -->
            <div class="test-card"
                 data-test-id="TC2.1"
                 data-expected-result="pass"
                 data-wcag-criterion="1.4.1">
                <h3>TC2.1: Required Field (Asterisk + Text) <span class="badge badge-pass">PASS</span></h3>
                <div class="test-sample">
                    <form>
                        <label class="tc2-required-icon">
                            Email Address
                            <input type="email" required>
                        </label>
                        <p class="tc2-required-text"><small>* Required field</small></p>
                    </form>
                </div>
                <p><strong>Why it passes:</strong> Required field indicated by red color + asterisk (*) + explanatory text. Color blind users can identify required fields.</p>
                <div class="code-block">.required::after {
  content: " *"; /* Asterisk symbol */
  color: #dc3545;
}
/* Plus legend: "* Required field" */</div>
            </div>

            <!-- TC2.2: Error message - icon + color -->
            <div class="test-card"
                 data-test-id="TC2.2"
                 data-expected-result="pass"
                 data-wcag-criterion="1.4.1">
                <h3>TC2.2: Error Message (Icon + Color) <span class="badge badge-pass">PASS</span></h3>
                <div class="test-sample">
                    <p class="tc2-error-with-icon"><strong>Please enter a valid email address</strong></p>
                </div>
                <p><strong>Why it passes:</strong> Error indicated by red color + warning icon (‚ö†) + bold text. Multiple visual cues.</p>
                <div class="code-block">.error::before {
  content: "‚ö† "; /* Warning icon */
}
.error {
  color: #dc3545;
  font-weight: bold; /* Additional emphasis */
}</div>
            </div>

            <!-- TC2.3: Status with icon + text -->
            <div class="test-card"
                 data-test-id="TC2.3"
                 data-expected-result="pass"
                 data-wcag-criterion="1.4.1">
                <h3>TC2.3: Status Indicator (Icon + Text) <span class="badge badge-pass">PASS</span></h3>
                <div class="test-sample">
                    <p class="tc2-status">
                        <span class="tc2-status-online">‚úì Online:</span> User A
                    </p>
                    <p class="tc2-status">
                        <span class="tc2-status-offline">√ó Offline:</span> User B
                    </p>
                </div>
                <p><strong>Why it passes:</strong> Status shown with color + icon (‚úì/√ó) + text label ("Online"/"Offline"). Clear for all users.</p>
                <div class="code-block">.status-online::before {
  content: "‚úì "; /* Checkmark */
}
.status-online {
  color: #198754;
}
/* Plus text: "Online" */</div>
            </div>

            <!-- TC2.4: Link with underline -->
            <div class="test-card"
                 data-test-id="TC2.4"
                 data-expected-result="pass"
                 data-wcag-criterion="1.4.1">
                <h3>TC2.4: Link (Underline + Color) <span class="badge badge-pass">PASS</span></h3>
                <div class="test-sample">
                    <p>Please read our <a href="#" class="tc2-link-underlined">terms of service</a> before continuing.</p>
                </div>
                <p><strong>Why it passes:</strong> Link indicated by blue color + underline. Users can identify links without relying on color.</p>
                <div class="code-block">a {
  color: #0d6efd; /* Blue color */
  text-decoration: underline; /* Plus underline! */
}</div>
            </div>

            <!-- TC2.5: Chart with pattern + color -->
            <div class="test-card"
                 data-test-id="TC2.5"
                 data-expected-result="pass"
                 data-wcag-criterion="1.4.1">
                <h3>TC2.5: Chart (Pattern + Color) <span class="badge badge-pass">PASS</span></h3>
                <div class="test-sample">
                    <div style="display: flex; align-items: flex-end; gap: 10px;">
                        <div class="tc2-chart-bar sales"></div>
                        <div class="tc2-chart-bar revenue"></div>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.9em;">
                        <span>/// Sales (diagonal stripes)</span><br>
                        <span>=== Revenue (horizontal stripes)</span>
                    </p>
                </div>
                <p><strong>Why it passes:</strong> Chart data uses color + distinct patterns (diagonal vs horizontal stripes) + legend. Color blind users can distinguish data series.</p>
                <div class="code-block">.sales-bar {
  background: repeating-linear-gradient(
    45deg, /* Diagonal pattern */
    #0d6efd, #0d6efd 5px,
    #5c9eff 5px, #5c9eff 10px
  );
}
/* Plus legend with pattern descriptions */</div>
            </div>
        </div>

        <!-- Expected Results Section -->
        <div class="expected-results"
             data-total-test-cases="10"
             data-expected-violations="5"
             data-expected-passes="5">

            <h3>üìä Expected Test Results</h3>

            <div class="results-summary">
                <ul>
                    <li><strong>Total Test Cases:</strong> 10</li>
                    <li><strong>Expected Violations:</strong> 5
                        <ul class="violation-list">
                            <li><strong>TC1.1</strong> - Required field indicated only by red color</li>
                            <li><strong>TC1.2</strong> - Error message shown only in red text</li>
                            <li><strong>TC1.3</strong> - Online/offline status with color-only dots</li>
                            <li><strong>TC1.4</strong> - Link differentiated only by blue color (no underline)</li>
                            <li><strong>TC1.5</strong> - Chart legend using color-only indicators</li>
                        </ul>
                    </li>
                    <li><strong>Expected Passes:</strong> 5
                        <ul class="pass-list">
                            <li><strong>TC2.1</strong> - Required field with asterisk + text + color</li>
                            <li><strong>TC2.2</strong> - Error with icon + bold + color</li>
                            <li><strong>TC2.3</strong> - Status with icon + text label + color</li>
                            <li><strong>TC2.4</strong> - Link with underline + color</li>
                            <li><strong>TC2.5</strong> - Chart with pattern + color + legend</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <h4>Detection Method</h4>
            <p><strong>Automated detection can identify potential violations:</strong></p>
            <ul>
                <li>Links without underline or other text decoration</li>
                <li>Elements using only color-based class names (e.g., .red, .green)</li>
                <li>Form fields with color-only required indicators</li>
                <li>Error messages styled only with color</li>
                <li>Charts and graphs without patterns or labels</li>
            </ul>

            <h4>Common Acceptable Alternatives to Color</h4>
            <ul>
                <li><strong>Text labels:</strong> "Required", "Error", "Online", "Offline"</li>
                <li><strong>Icons:</strong> *, ‚ö†, ‚úì, √ó, ‚Ñπ</li>
                <li><strong>Patterns:</strong> Stripes, dots, hatching in charts</li>
                <li><strong>Text styling:</strong> Bold, italic, underline</li>
                <li><strong>Shapes:</strong> Circles, squares, triangles in graphs</li>
                <li><strong>Position:</strong> Spatial arrangement, borders</li>
            </ul>

            <h4>Common Violations to Avoid</h4>
            <ul>
                <li>Red asterisk without "Required" text</li>
                <li>Error messages in red without icon or bold text</li>
                <li>Success messages in green without checkmark</li>
                <li>Links without underline (color-only)</li>
                <li>Status indicators using only colored dots</li>
                <li>Charts/graphs with color-only data series</li>
                <li>Calendar dates marked available/unavailable by color only</li>
                <li>Progress indicators using only color changes</li>
            </ul>

            <h4>Exception</h4>
            <p>Color-coded elements are acceptable if the information is also available in the surrounding context. For example, a traffic light icon can use color if the position (top/middle/bottom) also conveys the meaning.</p>
        </div>
    </div>

    <script>
        // Machine-readable test metadata
        window.testMetadata = {
            wcagCriterion: '1.4.1',
            criterionName: 'Use of Color',
            level: 'A',
            totalCases: 10,
            expectedViolations: 5,
            expectedPasses: 5,
            testCases: []
        };

        // Parse all test cases
        document.querySelectorAll('[data-test-id]').forEach(testCard => {
            const testCase = {
                id: testCard.dataset.testId,
                expectedResult: testCard.dataset.expectedResult,
                criterion: testCard.dataset.wcagCriterion
            };
            window.testMetadata.testCases.push(testCase);
        });

        // Export function for validation scripts
        window.getTestMetadata = function() {
            return window.testMetadata;
        };

        console.log('‚úÖ WCAG 1.4.1 - Use of Color test page loaded');
        console.log('üìä Test metadata:', window.testMetadata);
        console.log('üîç Use window.getTestMetadata() to access test data');
        console.log('üé® Key principle: Color is NOT the only visual means of conveying information');
    </script>
</body>
</html>
