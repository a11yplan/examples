<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WCAG 2.5.3 - Label in Name Test Page</title>

    <!-- Machine-readable metadata -->
    <meta name="test:wcag-criterion" content="2.5.3">
    <meta name="test:total-cases" content="10">
    <meta name="test:expected-violations" content="5">
    <meta name="test:expected-passes" content="5">

    <style>
        /* Base styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            color: #212529;
            border-bottom: 4px solid #0d6efd;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .header-info {
            background: #e7f1ff;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #0d6efd;
            margin-bottom: 30px;
        }

        .header-info p {
            margin: 5px 0;
            color: #495057;
        }

        /* Test grid - Side-by-side pattern */
        .test-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0 40px 0;
        }

        .test-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 2px solid #dee2e6;
        }

        .test-card.fail {
            border-color: #dc3545;
            background: #fff5f5;
        }

        .test-card.pass {
            border-color: #198754;
            background: #f0fff4;
        }

        .test-card h3 {
            margin-top: 0;
            color: #212529;
            font-size: 1.1rem;
        }

        .test-sample {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin: 15px 0;
            border: 1px solid #dee2e6;
        }

        .demo-button {
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            font-size: 14px;
            cursor: pointer;
            color: white;
        }

        .demo-button:focus {
            outline: 2px solid #0d6efd;
            outline-offset: 2px;
        }

        .fail-button {
            background-color: #dc3545;
        }

        .pass-button {
            background-color: #198754;
        }

        .demo-link {
            color: #0d6efd;
            text-decoration: underline;
            cursor: pointer;
        }

        .label-display {
            margin-top: 10px;
            padding: 10px;
            background: #fff3cd;
            border-radius: 4px;
            border-left: 3px solid #ffc107;
            font-size: 0.9em;
        }

        .code-block {
            background-color: #2d2d2d;
            color: #d4d4d4;
            padding: 12px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin-top: 12px;
            overflow-x: auto;
        }

        .code-block .tag {
            color: #569cd6;
        }

        .code-block .attr {
            color: #9cdcfe;
        }

        .code-block .string {
            color: #ce9178;
        }

        .code-block .comment {
            color: #6a9955;
        }

        .expected-results {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-top: 40px;
            border: 2px solid #0d6efd;
        }

        .expected-results h3 {
            color: #0d6efd;
            margin-top: 0;
        }

        .expected-results ul {
            margin: 10px 0;
        }

        .expected-results li {
            margin: 8px 0;
            color: #495057;
        }

        .violation-list {
            list-style-type: none;
            padding-left: 20px;
        }

        .violation-list li {
            padding: 5px 0;
            border-left: 3px solid #dc3545;
            padding-left: 10px;
            margin: 5px 0;
            background: #fff5f5;
        }

        .pass-list {
            list-style-type: none;
            padding-left: 20px;
        }

        .pass-list li {
            padding: 5px 0;
            border-left: 3px solid #198754;
            padding-left: 10px;
            margin: 5px 0;
            background: #f0fff4;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè∑Ô∏è WCAG 2.5.3 - Label in Name Test Page</h1>

        <div class="header-info"
             data-wcag-criterion="2.5.3"
             data-total-test-cases="10"
             data-expected-violations="5"
             data-expected-passes="5">
            <p><strong>Testing: WCAG 2.5.3 - Label in Name (Level A)</strong></p>
            <p><strong>Requirement:</strong> For user interface components with labels that include text or images of text, the accessible name contains the text that is presented visually</p>
            <p><strong>Why it matters:</strong> Voice control users say what they see. If visible text is "Submit" but accessible name is "Send form", voice command "click Submit" won't work.</p>
            <p>This page contains <strong>10 test cases</strong> (5 violations, 5 passes) demonstrating matching vs mismatched visible/accessible names.</p>
        </div>

        <h2>üîç Test Case 1: Button Text vs aria-label</h2>
        <div class="test-grid">
            <!-- FAIL: Mismatched button -->
            <div class="test-card fail"
                 data-test-id="TC1.1"
                 data-expected-result="violation"
                 data-wcag-criterion="2.5.3">
                <h3>‚ùå FAIL: Visible vs Accessible Name Mismatch</h3>
                <div class="test-sample">
                    <button class="demo-button fail-button" aria-label="Send form">
                        Submit
                    </button>
                    <div class="label-display">
                        <strong>Visible:</strong> "Submit"<br>
                        <strong>Accessible:</strong> "Send form" ‚ùå
                    </div>
                </div>
                <p><strong>Issue:</strong> Voice control users say "click Submit" but it won't work because accessible name is "Send form".</p>
                <div class="code-block"><span class="tag">&lt;button</span> <span class="attr">aria-label</span>=<span class="string">"Send form"</span><span class="tag">&gt;</span>
  Submit <span class="comment">&lt;!-- Visible text doesn't match! --&gt;</span>
<span class="tag">&lt;/button&gt;</span></div>
            </div>

            <!-- PASS: Matching button -->
            <div class="test-card pass"
                 data-test-id="TC2.1"
                 data-expected-result="pass"
                 data-wcag-criterion="2.5.3">
                <h3>‚úÖ PASS: Accessible Name Includes Visible Text</h3>
                <div class="test-sample">
                    <button class="demo-button pass-button" aria-label="Submit form">
                        Submit
                    </button>
                    <div class="label-display">
                        <strong>Visible:</strong> "Submit"<br>
                        <strong>Accessible:</strong> "Submit form" ‚úì
                    </div>
                </div>
                <p><strong>Why it passes:</strong> Accessible name "Submit form" contains visible text "Submit". Voice command "click Submit" works.</p>
                <div class="code-block"><span class="tag">&lt;button</span> <span class="attr">aria-label</span>=<span class="string">"Submit form"</span><span class="tag">&gt;</span>
  Submit <span class="comment">&lt;!-- Visible text is included! --&gt;</span>
<span class="tag">&lt;/button&gt;</span></div>
            </div>
        </div>

        <h2>üîç Test Case 2: Link Text vs aria-label</h2>
        <div class="test-grid">
            <!-- FAIL: Mismatched link -->
            <div class="test-card fail"
                 data-test-id="TC1.2"
                 data-expected-result="violation"
                 data-wcag-criterion="2.5.3">
                <h3>‚ùå FAIL: Link Text Doesn't Match Name</h3>
                <div class="test-sample">
                    <a href="#" class="demo-link" aria-label="Get in touch with us">
                        Contact Us
                    </a>
                    <div class="label-display">
                        <strong>Visible:</strong> "Contact Us"<br>
                        <strong>Accessible:</strong> "Get in touch with us" ‚ùå
                    </div>
                </div>
                <p><strong>Issue:</strong> Visible text "Contact Us" not in accessible name "Get in touch with us". Voice control breaks.</p>
                <div class="code-block"><span class="tag">&lt;a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">aria-label</span>=<span class="string">"Get in touch with us"</span><span class="tag">&gt;</span>
  Contact Us <span class="comment">&lt;!-- Text not in aria-label! --&gt;</span>
<span class="tag">&lt;/a&gt;</span></div>
            </div>

            <!-- PASS: Matching link -->
            <div class="test-card pass"
                 data-test-id="TC2.2"
                 data-expected-result="pass"
                 data-wcag-criterion="2.5.3">
                <h3>‚úÖ PASS: Link Name Contains Visible Text</h3>
                <div class="test-sample">
                    <a href="#" class="demo-link" aria-label="Contact Us for support">
                        Contact Us
                    </a>
                    <div class="label-display">
                        <strong>Visible:</strong> "Contact Us"<br>
                        <strong>Accessible:</strong> "Contact Us for support" ‚úì
                    </div>
                </div>
                <p><strong>Why it passes:</strong> Accessible name includes visible "Contact Us" text. Voice command works.</p>
                <div class="code-block"><span class="tag">&lt;a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">aria-label</span>=<span class="string">"Contact Us for support"</span><span class="tag">&gt;</span>
  Contact Us <span class="comment">&lt;!-- Included in aria-label! --&gt;</span>
<span class="tag">&lt;/a&gt;</span></div>
            </div>
        </div>

        <h2>üîç Test Case 3: Input Label vs aria-label</h2>
        <div class="test-grid">
            <!-- FAIL: Mismatched input -->
            <div class="test-card fail"
                 data-test-id="TC1.3"
                 data-expected-result="violation"
                 data-wcag-criterion="2.5.3">
                <h3>‚ùå FAIL: Input Label Mismatch</h3>
                <div class="test-sample">
                    <label for="email-fail">
                        Email
                        <input type="email" id="email-fail" aria-label="Email address field" style="display: block; margin-top: 5px; padding: 8px; width: 100%; box-sizing: border-box;">
                    </label>
                    <div class="label-display">
                        <strong>Visible:</strong> "Email"<br>
                        <strong>Accessible:</strong> "Email address field" ‚ùå
                    </div>
                </div>
                <p><strong>Issue:</strong> Visible label "Email" but accessible name is "Email address field". Not an exact match.</p>
                <div class="code-block"><span class="tag">&lt;label&gt;</span>Email
  <span class="tag">&lt;input</span> <span class="attr">aria-label</span>=<span class="string">"Email address field"</span><span class="tag">&gt;</span>
<span class="tag">&lt;/label&gt;</span>
<span class="comment">&lt;!-- "Email" not at start of accessible name --&gt;</span></div>
            </div>

            <!-- PASS: Matching input -->
            <div class="test-card pass"
                 data-test-id="TC2.3"
                 data-expected-result="pass"
                 data-wcag-criterion="2.5.3">
                <h3>‚úÖ PASS: Input Label Matches</h3>
                <div class="test-sample">
                    <label for="email-pass">
                        Email
                        <input type="email" id="email-pass" style="display: block; margin-top: 5px; padding: 8px; width: 100%; box-sizing: border-box;">
                    </label>
                    <div class="label-display">
                        <strong>Visible:</strong> "Email"<br>
                        <strong>Accessible:</strong> "Email" ‚úì
                    </div>
                </div>
                <p><strong>Why it passes:</strong> No aria-label, so accessible name comes from &lt;label&gt; text "Email". Perfect match.</p>
                <div class="code-block"><span class="tag">&lt;label</span> <span class="attr">for</span>=<span class="string">"email-pass"</span><span class="tag">&gt;</span>Email
  <span class="tag">&lt;input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">id</span>=<span class="string">"email-pass"</span><span class="tag">&gt;</span>
<span class="tag">&lt;/label&gt;</span>
<span class="comment">&lt;!-- Label text used as accessible name --&gt;</span></div>
            </div>
        </div>

        <h2>üîç Test Case 4: Icon Button</h2>
        <div class="test-grid">
            <!-- FAIL: Icon button mismatch -->
            <div class="test-card fail"
                 data-test-id="TC1.4"
                 data-expected-result="violation"
                 data-wcag-criterion="2.5.3">
                <h3>‚ùå FAIL: Icon Button Name Mismatch</h3>
                <div class="test-sample">
                    <button class="demo-button fail-button" aria-label="Remove item">
                        <span style="font-size: 1.2em;">üóëÔ∏è</span> Delete
                    </button>
                    <div class="label-display">
                        <strong>Visible:</strong> "Delete"<br>
                        <strong>Accessible:</strong> "Remove item" ‚ùå
                    </div>
                </div>
                <p><strong>Issue:</strong> Button shows "Delete" but accessible name is "Remove item". Voice command "click Delete" fails.</p>
                <div class="code-block"><span class="tag">&lt;button</span> <span class="attr">aria-label</span>=<span class="string">"Remove item"</span><span class="tag">&gt;</span>
  üóëÔ∏è Delete <span class="comment">&lt;!-- "Delete" not in accessible name! --&gt;</span>
<span class="tag">&lt;/button&gt;</span></div>
            </div>

            <!-- PASS: Icon button match -->
            <div class="test-card pass"
                 data-test-id="TC2.4"
                 data-expected-result="pass"
                 data-wcag-criterion="2.5.3">
                <h3>‚úÖ PASS: Icon Button Name Matches</h3>
                <div class="test-sample">
                    <button class="demo-button pass-button" aria-label="Delete item from cart">
                        <span style="font-size: 1.2em;">üóëÔ∏è</span> Delete
                    </button>
                    <div class="label-display">
                        <strong>Visible:</strong> "Delete"<br>
                        <strong>Accessible:</strong> "Delete item from cart" ‚úì
                    </div>
                </div>
                <p><strong>Why it passes:</strong> Accessible name starts with visible text "Delete". Voice control works.</p>
                <div class="code-block"><span class="tag">&lt;button</span> <span class="attr">aria-label</span>=<span class="string">"Delete item from cart"</span><span class="tag">&gt;</span>
  üóëÔ∏è Delete <span class="comment">&lt;!-- "Delete" is in accessible name! --&gt;</span>
<span class="tag">&lt;/button&gt;</span></div>
            </div>
        </div>

        <h2>üîç Test Case 5: Custom Control</h2>
        <div class="test-grid">
            <!-- FAIL: Custom control mismatch -->
            <div class="test-card fail"
                 data-test-id="TC1.5"
                 data-expected-result="violation"
                 data-wcag-criterion="2.5.3">
                <h3>‚ùå FAIL: Custom Control Name Mismatch</h3>
                <div class="test-sample">
                    <div role="button" tabindex="0" aria-label="Agree to terms" style="padding: 10px 20px; background: #dc3545; color: white; border-radius: 5px; cursor: pointer; display: inline-block;">
                        Accept
                    </div>
                    <div class="label-display">
                        <strong>Visible:</strong> "Accept"<br>
                        <strong>Accessible:</strong> "Agree to terms" ‚ùå
                    </div>
                </div>
                <p><strong>Issue:</strong> Shows "Accept" but accessible name is "Agree to terms". No match.</p>
                <div class="code-block"><span class="tag">&lt;div</span> <span class="attr">role</span>=<span class="string">"button"</span> <span class="attr">aria-label</span>=<span class="string">"Agree to terms"</span><span class="tag">&gt;</span>
  Accept <span class="comment">&lt;!-- "Accept" not in aria-label! --&gt;</span>
<span class="tag">&lt;/div&gt;</span></div>
            </div>

            <!-- PASS: Custom control match -->
            <div class="test-card pass"
                 data-test-id="TC2.5"
                 data-expected-result="pass"
                 data-wcag-criterion="2.5.3">
                <h3>‚úÖ PASS: Custom Control Name Matches</h3>
                <div class="test-sample">
                    <div role="button" tabindex="0" aria-label="Accept terms and conditions" style="padding: 10px 20px; background: #198754; color: white; border-radius: 5px; cursor: pointer; display: inline-block;">
                        Accept
                    </div>
                    <div class="label-display">
                        <strong>Visible:</strong> "Accept"<br>
                        <strong>Accessible:</strong> "Accept terms and conditions" ‚úì
                    </div>
                </div>
                <p><strong>Why it passes:</strong> Accessible name begins with visible text "Accept".</p>
                <div class="code-block"><span class="tag">&lt;div</span> <span class="attr">role</span>=<span class="string">"button"</span> <span class="attr">aria-label</span>=<span class="string">"Accept terms and conditions"</span><span class="tag">&gt;</span>
  Accept <span class="comment">&lt;!-- "Accept" starts aria-label! --&gt;</span>
<span class="tag">&lt;/div&gt;</span></div>
            </div>
        </div>

        <!-- Expected Results Section -->
        <div class="expected-results"
             data-total-test-cases="10"
             data-expected-violations="5"
             data-expected-passes="5">

            <h3>üìä Expected Test Results</h3>

            <div class="results-summary">
                <ul>
                    <li><strong>Total Test Cases:</strong> 10</li>
                    <li><strong>Expected Violations:</strong> 5
                        <ul class="violation-list">
                            <li><strong>TC1.1</strong> - Button visible "Submit" but accessible name "Send form"</li>
                            <li><strong>TC1.2</strong> - Link visible "Contact Us" but accessible name "Get in touch with us"</li>
                            <li><strong>TC1.3</strong> - Input visible "Email" but accessible name "Email address field"</li>
                            <li><strong>TC1.4</strong> - Icon button visible "Delete" but accessible name "Remove item"</li>
                            <li><strong>TC1.5</strong> - Custom control visible "Accept" but accessible name "Agree to terms"</li>
                        </ul>
                    </li>
                    <li><strong>Expected Passes:</strong> 5
                        <ul class="pass-list">
                            <li><strong>TC2.1</strong> - Button accessible name "Submit form" includes visible "Submit"</li>
                            <li><strong>TC2.2</strong> - Link accessible name "Contact Us for support" includes visible "Contact Us"</li>
                            <li><strong>TC2.3</strong> - Input accessible name matches visible label "Email"</li>
                            <li><strong>TC2.4</strong> - Icon button accessible name "Delete item from cart" starts with "Delete"</li>
                            <li><strong>TC2.5</strong> - Custom control accessible name "Accept terms and conditions" starts with "Accept"</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <h4>Detection Method</h4>
            <p><strong>Automated detection can check:</strong></p>
            <ul>
                <li>Elements with aria-label or aria-labelledby</li>
                <li>Compare visible text content with accessible name</li>
                <li>Check if visible text is substring of accessible name</li>
                <li>Verify accessible name starts with or contains visible text</li>
                <li>Case-insensitive matching (but preserve order)</li>
            </ul>

            <h4>The Rule</h4>
            <p><strong>For components with visible text labels:</strong></p>
            <ul>
                <li>Accessible name MUST contain the visible text</li>
                <li>Visible text should appear at the START of accessible name (recommended)</li>
                <li>Exact character match (case-sensitive in most implementations)</li>
                <li>Additional text in accessible name is allowed (e.g., context)</li>
            </ul>

            <h4>Good Practices</h4>
            <p><strong>Best approach (visible text at start):</strong></p>
            <ul>
                <li>Visible: "Submit"</li>
                <li>Accessible: "Submit form" ‚úì (adds context)</li>
            </ul>

            <p><strong>Acceptable (visible text included):</strong></p>
            <ul>
                <li>Visible: "Search"</li>
                <li>Accessible: "Search the documentation" ‚úì</li>
            </ul>

            <p><strong>Violation (visible text missing):</strong></p>
            <ul>
                <li>Visible: "Next"</li>
                <li>Accessible: "Go to next page" ‚ùå ("Next" not at start)</li>
            </ul>

            <h4>Common Scenarios</h4>
            <p><strong>Icon buttons with text:</strong></p>
            <ul>
                <li>Include visible text at start of aria-label</li>
                <li>Example: &lt;button aria-label="Search products"&gt;üîç Search&lt;/button&gt; ‚úì</li>
            </ul>

            <p><strong>Truncated text:</strong></p>
            <ul>
                <li>If text is visually truncated with "...", use full text in accessible name</li>
                <li>Example: Visible "Read mo..." ‚Üí Accessible "Read more about features" ‚úì</li>
            </ul>

            <p><strong>Internationalization:</strong></p>
            <ul>
                <li>Translated visible text must match translated accessible name</li>
                <li>Keep text consistent across languages</li>
            </ul>

            <h4>Exceptions</h4>
            <p><strong>This criterion does NOT apply to:</strong></p>
            <ul>
                <li>Icon-only buttons without visible text (use any descriptive aria-label)</li>
                <li>Text is decorative or supplementary (not the label)</li>
                <li>Visible text would create accessibility issues if used in accessible name</li>
            </ul>

            <h4>Why This Matters</h4>
            <p><strong>Voice control users rely on visible text:</strong></p>
            <ul>
                <li>They see "Submit" and say "click Submit"</li>
                <li>If accessible name is "Send form", the command fails</li>
                <li>Creates frustration and prevents task completion</li>
                <li>Consistency between visual and programmatic labels is essential</li>
            </ul>

            <h4>Testing Tips</h4>
            <ul>
                <li>Use browser dev tools to inspect accessible name</li>
                <li>Test with voice control (Dragon, Voice Control on Mac/iOS)</li>
                <li>Check aria-label, aria-labelledby against visible text</li>
                <li>Ensure visible text appears at start of accessible name</li>
            </ul>
        </div>
    </div>

    <script>
        // Machine-readable test metadata
        window.testMetadata = {
            wcagCriterion: '2.5.3',
            criterionName: 'Label in Name',
            level: 'A',
            totalCases: 10,
            expectedViolations: 5,
            expectedPasses: 5,
            testCases: []
        };

        // Parse all test cases
        document.querySelectorAll('[data-test-id]').forEach(testCard => {
            const testCase = {
                id: testCard.dataset.testId,
                expectedResult: testCard.dataset.expectedResult,
                criterion: testCard.dataset.wcagCriterion
            };
            window.testMetadata.testCases.push(testCase);
        });

        // Export function for validation scripts
        window.getTestMetadata = function() {
            return window.testMetadata;
        };

        console.log('‚úÖ WCAG 2.5.3 - Label in Name test page loaded');
        console.log('üìä Test metadata:', window.testMetadata);
        console.log('üîç Use window.getTestMetadata() to access test data');
        console.log('üè∑Ô∏è  Key: Accessible name must contain visible text (preferably at start)');
    </script>
</body>
</html>
