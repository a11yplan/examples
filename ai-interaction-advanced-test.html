<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Browser Interaction - Advanced Test</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 40px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }

        .intro {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 4px;
        }

        .test-section {
            margin-bottom: 50px;
            padding: 30px;
            background-color: #fafafa;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }

        .test-section h2 {
            color: #1976d2;
            margin-top: 0;
            border-bottom: 2px solid #64b5f6;
            padding-bottom: 10px;
        }

        .instruction {
            background-color: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .expected-outcome {
            background-color: #e8eaf6;
            border-left: 4px solid #5c6bc0;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .btn-primary {
            padding: 12px 24px;
            font-size: 16px;
            background-color: #2196f3;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: 600;
        }

        .btn-primary:hover {
            background-color: #1976d2;
        }

        .btn-primary:disabled {
            background-color: #bdbdbd;
            cursor: not-allowed;
        }

        .btn-success {
            background-color: #4caf50;
        }

        .btn-success:hover {
            background-color: #388e3c;
        }

        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .modal h3 {
            margin-top: 0;
            color: #1976d2;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #757575;
        }

        .modal-close:hover {
            color: #000;
        }

        /* Drag and Drop Styles */
        .drag-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 20px;
        }

        .drop-zone {
            min-height: 300px;
            padding: 20px;
            background-color: white;
            border: 3px dashed #bdbdbd;
            border-radius: 8px;
        }

        .drop-zone h4 {
            margin-top: 0;
            color: #424242;
        }

        .drag-item {
            padding: 15px 20px;
            margin: 10px 0;
            background-color: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 5px;
            cursor: move;
            user-select: none;
            transition: all 0.3s;
        }

        .drag-item:hover {
            background-color: #bbdefb;
            transform: scale(1.02);
        }

        .drag-item.dragging {
            opacity: 0.5;
            transform: scale(0.95);
        }

        .drop-zone.drag-over {
            background-color: #e8f5e9;
            border-color: #4caf50;
        }

        /* Dynamic Content Styles */
        .content-box {
            padding: 20px;
            background-color: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            margin: 15px 0;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2196f3;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .dynamic-content {
            display: none;
            margin-top: 15px;
            padding: 20px;
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
            border-radius: 4px;
        }

        .dynamic-content.visible {
            display: block;
        }

        /* Form Styles */
        .form-step {
            display: none;
        }

        .form-step.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #424242;
        }

        .form-input {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
        }

        .form-input:focus {
            outline: 3px solid #2196f3;
            outline-offset: 2px;
            border-color: #1976d2;
        }

        .form-navigation {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .step-dot {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #757575;
        }

        .step-dot.active {
            background-color: #2196f3;
            color: white;
        }

        .step-dot.completed {
            background-color: #4caf50;
            color: white;
        }

        .success-box {
            padding: 20px;
            background-color: #e8f5e9;
            border: 2px solid #4caf50;
            border-radius: 8px;
            color: #2e7d32;
            font-weight: 600;
            text-align: center;
        }

        .validation-list {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
        }

        .validation-list h4 {
            margin-top: 0;
            color: #424242;
        }

        code {
            background-color: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #d32f2f;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸš€ AI Browser Interaction - Advanced Test</h1>

        <div class="intro">
            <h3 style="margin-top: 0;">Test Purpose</h3>
            <p>This page contains <strong>advanced interaction tests</strong> designed to validate complex AI browser capabilities including modal dialogs, drag-and-drop, dynamic content loading, and multi-step forms.</p>
            <p><strong>Target Completion Time:</strong> ~2-3 minutes</p>
            <p><strong>Validation Method:</strong> AI must verify complex DOM state changes, event handling, and multi-step workflows</p>
        </div>

        <!-- TEST SECTION 1: Modal Dialog Interaction -->
        <section class="test-section" data-section-id="modal-tests">
            <h2>Test Section 1: Modal Dialog Interaction</h2>

            <div class="instruction">
                <strong>AI Instructions:</strong>
                <ol>
                    <li><strong>TC1.1:</strong> Click "Open Modal" button</li>
                    <li><strong>TC1.2:</strong> Verify modal is visible with title "User Preferences"</li>
                    <li><strong>TC1.3:</strong> Enable "Dark Mode" checkbox inside modal</li>
                    <li><strong>TC1.4:</strong> Click "Save Preferences" button</li>
                    <li><strong>TC1.5:</strong> Verify modal closes and success message appears</li>
                </ol>
            </div>

            <div class="expected-outcome">
                <strong>Expected Outcomes:</strong>
                <ul>
                    <li>Modal overlay displays with dark background</li>
                    <li>Modal contains checkbox and save button</li>
                    <li>After saving, modal closes automatically</li>
                    <li>Success message shows: "Preferences saved! Dark mode: enabled"</li>
                </ul>
            </div>

            <div style="margin: 20px 0;">
                <button class="btn-primary"
                        id="open-modal-btn"
                        data-test-id="TC1.1"
                        data-action="open-modal">
                    Open Modal
                </button>
                <div id="modal-result" data-result-id="modal-result" style="margin-top: 15px;"></div>
            </div>

            <div class="validation-list">
                <h4>Validation Checkpoints:</h4>
                <ul>
                    <li>Modal overlay has class "active"</li>
                    <li>Checkbox with id "dark-mode-checkbox" is checked</li>
                    <li>Modal overlay does not have class "active" after save</li>
                    <li>Result div contains "Dark mode: enabled"</li>
                    <li>Modal element has <code>data-interaction-complete="true"</code></li>
                </ul>
            </div>
        </section>

        <!-- Modal HTML -->
        <div class="modal-overlay" id="modal-overlay" data-modal-id="preferences-modal">
            <div class="modal">
                <button class="modal-close" id="modal-close" data-action="close-modal">&times;</button>
                <h3>User Preferences</h3>
                <div class="checkbox-group">
                    <input type="checkbox"
                           id="dark-mode-checkbox"
                           data-test-id="TC1.3"
                           data-preference="dark-mode">
                    <label for="dark-mode-checkbox">Enable Dark Mode</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox"
                           id="notifications-checkbox"
                           data-preference="notifications">
                    <label for="notifications-checkbox">Enable Notifications</label>
                </div>
                <div style="margin-top: 20px;">
                    <button class="btn-success"
                            id="save-preferences-btn"
                            data-test-id="TC1.4"
                            data-action="save-preferences">
                        Save Preferences
                    </button>
                </div>
            </div>
        </div>

        <!-- TEST SECTION 2: Drag and Drop -->
        <section class="test-section" data-section-id="drag-drop-tests">
            <h2>Test Section 2: Drag and Drop Sorting</h2>

            <div class="instruction">
                <strong>AI Instructions:</strong>
                <ol>
                    <li><strong>TC2.1:</strong> Drag "Task C" from Source List</li>
                    <li><strong>TC2.2:</strong> Drop "Task C" into Target List</li>
                    <li><strong>TC2.3:</strong> Verify "Task C" appears in Target List</li>
                    <li><strong>TC2.4:</strong> Verify "Task C" removed from Source List</li>
                    <li><strong>TC2.5:</strong> Click "Verify Order" button to validate</li>
                </ol>
            </div>

            <div class="expected-outcome">
                <strong>Expected Outcomes:</strong>
                <ul>
                    <li>Task C moves from Source List to Target List</li>
                    <li>Source List contains only Task A and Task B</li>
                    <li>Target List contains Task C</li>
                    <li>Success message confirms: "Drag and drop successful! Task C is in target list."</li>
                </ul>
            </div>

            <div class="drag-container">
                <div class="drop-zone"
                     id="source-list"
                     data-zone-id="source"
                     data-test-id="TC2.1">
                    <h4>ðŸ“‹ Source List</h4>
                    <div class="drag-item"
                         draggable="true"
                         data-item-id="task-a"
                         data-task="A">
                        Task A
                    </div>
                    <div class="drag-item"
                         draggable="true"
                         data-item-id="task-b"
                         data-task="B">
                        Task B
                    </div>
                    <div class="drag-item"
                         draggable="true"
                         data-item-id="task-c"
                         data-task="C"
                         data-test-target="true">
                        Task C
                    </div>
                </div>

                <div class="drop-zone"
                     id="target-list"
                     data-zone-id="target"
                     data-test-id="TC2.2"
                     data-expected-content="task-c">
                    <h4>ðŸŽ¯ Target List</h4>
                    <p style="color: #757575; font-style: italic;">Drop items here</p>
                </div>
            </div>

            <div style="margin: 20px 0;">
                <button class="btn-primary"
                        id="verify-drag-btn"
                        data-test-id="TC2.5"
                        data-action="verify-drag">
                    Verify Order
                </button>
                <div id="drag-result" data-result-id="drag-result" style="margin-top: 15px;"></div>
            </div>

            <div class="validation-list">
                <h4>Validation Checkpoints:</h4>
                <ul>
                    <li>Target list contains element with <code>data-item-id="task-c"</code></li>
                    <li>Source list does NOT contain <code>data-item-id="task-c"</code></li>
                    <li>Target list has <code>data-has-task-c="true"</code> attribute</li>
                    <li>Result div contains "Task C is in target list"</li>
                </ul>
            </div>
        </section>

        <!-- TEST SECTION 3: Dynamic Content Loading -->
        <section class="test-section" data-section-id="dynamic-content-tests">
            <h2>Test Section 3: Dynamic Content & Conditional Display</h2>

            <div class="instruction">
                <strong>AI Instructions:</strong>
                <ol>
                    <li><strong>TC3.1:</strong> Click "Load User Data" button</li>
                    <li><strong>TC3.2:</strong> Wait for loading to complete (~1 second)</li>
                    <li><strong>TC3.3:</strong> Verify user data appears with name "Alex Johnson"</li>
                    <li><strong>TC3.4:</strong> Select "Yes" for "Are you a developer?"</li>
                    <li><strong>TC3.5:</strong> Verify additional field "Programming Language" appears</li>
                    <li><strong>TC3.6:</strong> Select "JavaScript" from programming language dropdown</li>
                </ol>
            </div>

            <div class="expected-outcome">
                <strong>Expected Outcomes:</strong>
                <ul>
                    <li>Loading spinner appears briefly</li>
                    <li>User data displays: "Name: Alex Johnson, Role: Senior Developer"</li>
                    <li>Conditional field appears only when "Yes" is selected</li>
                    <li>Final validation confirms all selections</li>
                </ul>
            </div>

            <div style="margin: 20px 0;">
                <button class="btn-primary"
                        id="load-data-btn"
                        data-test-id="TC3.1"
                        data-action="load-user-data">
                    Load User Data
                </button>
                <div id="loading-indicator" style="margin-top: 15px;"></div>
                <div class="dynamic-content"
                     id="user-data-content"
                     data-test-id="TC3.3"
                     data-expected-name="Alex Johnson">
                </div>
            </div>

            <div class="content-box" style="margin-top: 20px;">
                <div class="form-group">
                    <label>Are you a developer?</label>
                    <div class="radio-group" id="developer-radio-group" data-test-id="TC3.4">
                        <div class="radio-option">
                            <input type="radio"
                                   id="developer-yes"
                                   name="developer"
                                   value="yes"
                                   data-conditional-trigger="true">
                            <label for="developer-yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio"
                                   id="developer-no"
                                   name="developer"
                                   value="no">
                            <label for="developer-no">No</label>
                        </div>
                    </div>
                </div>

                <div class="form-group dynamic-content"
                     id="conditional-field"
                     data-test-id="TC3.5"
                     data-conditional="developer-yes">
                    <label for="prog-lang">Programming Language:</label>
                    <select class="form-input"
                            id="prog-lang"
                            data-test-id="TC3.6"
                            data-expected-value="javascript">
                        <option value="">-- Select --</option>
                        <option value="javascript">JavaScript</option>
                        <option value="python">Python</option>
                        <option value="java">Java</option>
                        <option value="csharp">C#</option>
                    </select>
                </div>
            </div>

            <div class="validation-list">
                <h4>Validation Checkpoints:</h4>
                <ul>
                    <li>User data div contains "Alex Johnson"</li>
                    <li>Radio button "developer-yes" is checked</li>
                    <li>Conditional field has class "visible"</li>
                    <li>Select value equals "javascript"</li>
                    <li>Content section has <code>data-all-loaded="true"</code></li>
                </ul>
            </div>
        </section>

        <!-- TEST SECTION 4: Multi-Step Form -->
        <section class="test-section" data-section-id="multi-step-form-tests">
            <h2>Test Section 4: Multi-Step Form Workflow</h2>

            <div class="instruction">
                <strong>AI Instructions:</strong>
                <ol>
                    <li><strong>TC4.1:</strong> Enter "AI Tester" in Full Name field</li>
                    <li><strong>TC4.2:</strong> Enter "ai.tester@example.com" in Email field</li>
                    <li><strong>TC4.3:</strong> Click "Next Step" button</li>
                    <li><strong>TC4.4:</strong> Enter "Software Testing" in Job Title field</li>
                    <li><strong>TC4.5:</strong> Enter "5" in Years of Experience field</li>
                    <li><strong>TC4.6:</strong> Click "Next Step" button</li>
                    <li><strong>TC4.7:</strong> Verify all entered data in review step</li>
                    <li><strong>TC4.8:</strong> Click "Submit Form" button</li>
                </ol>
            </div>

            <div class="expected-outcome">
                <strong>Expected Outcomes:</strong>
                <ul>
                    <li>Step indicator shows progress (1 â†’ 2 â†’ 3)</li>
                    <li>Form data persists across steps</li>
                    <li>Review page displays all entered information</li>
                    <li>Final success message confirms submission</li>
                </ul>
            </div>

            <div class="step-indicator" id="step-indicator">
                <div class="step-dot active" data-step="1">1</div>
                <div class="step-dot" data-step="2">2</div>
                <div class="step-dot" data-step="3">3</div>
            </div>

            <form id="multi-step-form" data-form-id="multi-step-form">
                <!-- Step 1: Personal Info -->
                <div class="form-step active" data-step="1">
                    <h3>Step 1: Personal Information</h3>
                    <div class="form-group">
                        <label for="fullname">Full Name:</label>
                        <input type="text"
                               class="form-input"
                               id="fullname"
                               data-test-id="TC4.1"
                               data-expected-value="AI Tester"
                               required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email"
                               class="form-input"
                               id="email"
                               data-test-id="TC4.2"
                               data-expected-value="ai.tester@example.com"
                               required>
                    </div>
                    <div class="form-navigation">
                        <button type="button"
                                class="btn-primary"
                                data-test-id="TC4.3"
                                data-action="next-step">
                            Next Step
                        </button>
                    </div>
                </div>

                <!-- Step 2: Professional Info -->
                <div class="form-step" data-step="2">
                    <h3>Step 2: Professional Information</h3>
                    <div class="form-group">
                        <label for="jobtitle">Job Title:</label>
                        <input type="text"
                               class="form-input"
                               id="jobtitle"
                               data-test-id="TC4.4"
                               data-expected-value="Software Testing"
                               required>
                    </div>
                    <div class="form-group">
                        <label for="experience">Years of Experience:</label>
                        <input type="number"
                               class="form-input"
                               id="experience"
                               data-test-id="TC4.5"
                               data-expected-value="5"
                               min="0"
                               max="50"
                               required>
                    </div>
                    <div class="form-navigation">
                        <button type="button"
                                class="btn-primary"
                                data-action="prev-step">
                            Previous
                        </button>
                        <button type="button"
                                class="btn-primary"
                                data-test-id="TC4.6"
                                data-action="next-step">
                            Next Step
                        </button>
                    </div>
                </div>

                <!-- Step 3: Review and Submit -->
                <div class="form-step" data-step="3">
                    <h3>Step 3: Review & Submit</h3>
                    <div class="content-box" id="review-content" data-test-id="TC4.7">
                        <h4>Please review your information:</h4>
                        <p><strong>Full Name:</strong> <span id="review-fullname"></span></p>
                        <p><strong>Email:</strong> <span id="review-email"></span></p>
                        <p><strong>Job Title:</strong> <span id="review-jobtitle"></span></p>
                        <p><strong>Years of Experience:</strong> <span id="review-experience"></span></p>
                    </div>
                    <div class="form-navigation">
                        <button type="button"
                                class="btn-primary"
                                data-action="prev-step">
                            Previous
                        </button>
                        <button type="submit"
                                class="btn-success"
                                data-test-id="TC4.8"
                                data-action="submit-form">
                            Submit Form
                        </button>
                    </div>
                </div>
            </form>

            <div id="form-result" data-result-id="form-result" style="margin-top: 20px;"></div>

            <div class="validation-list">
                <h4>Validation Checkpoints:</h4>
                <ul>
                    <li>All form inputs contain expected values</li>
                    <li>Step 3 dot has class "active"</li>
                    <li>Steps 1 and 2 dots have class "completed"</li>
                    <li>Review section displays all entered data</li>
                    <li>Form has <code>data-submitted="true"</code> after submission</li>
                    <li>Success message contains all submitted values</li>
                </ul>
            </div>
        </section>
    </div>

    <script>
        // SECTION 1: Modal Dialog Functionality
        const modalOverlay = document.getElementById('modal-overlay');
        const openModalBtn = document.getElementById('open-modal-btn');
        const closeModalBtn = document.getElementById('modal-close');
        const savePreferencesBtn = document.getElementById('save-preferences-btn');
        const darkModeCheckbox = document.getElementById('dark-mode-checkbox');
        const modalResult = document.getElementById('modal-result');

        openModalBtn.addEventListener('click', function() {
            modalOverlay.classList.add('active');
            console.log('[TC1.1] Modal opened');
        });

        closeModalBtn.addEventListener('click', function() {
            modalOverlay.classList.remove('active');
        });

        savePreferencesBtn.addEventListener('click', function() {
            const darkModeEnabled = darkModeCheckbox.checked;
            const notificationsEnabled = document.getElementById('notifications-checkbox').checked;

            modalOverlay.classList.remove('active');
            modalOverlay.setAttribute('data-interaction-complete', 'true');

            const message = `Preferences saved! Dark mode: ${darkModeEnabled ? 'enabled' : 'disabled'}, Notifications: ${notificationsEnabled ? 'enabled' : 'disabled'}`;
            modalResult.innerHTML = `<div class="success-box">${message}</div>`;

            console.log('[TC1.4] Preferences saved', { darkMode: darkModeEnabled, notifications: notificationsEnabled });
        });

        // SECTION 2: Drag and Drop Functionality
        let draggedElement = null;

        document.querySelectorAll('.drag-item').forEach(item => {
            item.addEventListener('dragstart', function(e) {
                draggedElement = this;
                this.classList.add('dragging');
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/html', this.innerHTML);
                console.log('[TC2.1] Drag started:', this.getAttribute('data-task'));
            });

            item.addEventListener('dragend', function() {
                this.classList.remove('dragging');
            });
        });

        document.querySelectorAll('.drop-zone').forEach(zone => {
            zone.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('drag-over');
                e.dataTransfer.dropEffect = 'move';
            });

            zone.addEventListener('dragleave', function() {
                this.classList.remove('drag-over');
            });

            zone.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('drag-over');

                if (draggedElement && this.id === 'target-list') {
                    // Remove placeholder text
                    const placeholder = this.querySelector('p');
                    if (placeholder) placeholder.remove();

                    this.appendChild(draggedElement);
                    this.setAttribute('data-has-task-c', 'true');
                    console.log('[TC2.2] Item dropped in target list:', draggedElement.getAttribute('data-task'));
                }
            });
        });

        document.getElementById('verify-drag-btn').addEventListener('click', function() {
            const targetList = document.getElementById('target-list');
            const taskC = targetList.querySelector('[data-item-id="task-c"]');
            const dragResult = document.getElementById('drag-result');

            if (taskC) {
                dragResult.innerHTML = '<div class="success-box">âœ“ Drag and drop successful! Task C is in target list.</div>';
                console.log('[TC2.5] Drag and drop verification: SUCCESS');
            } else {
                dragResult.innerHTML = '<div style="padding: 15px; background-color: #ffebee; border: 2px solid #f44336; border-radius: 8px; color: #c62828;">Task C is not in the target list. Please drag Task C to the target list.</div>';
                console.log('[TC2.5] Drag and drop verification: FAILED');
            }
        });

        // SECTION 3: Dynamic Content Loading
        document.getElementById('load-data-btn').addEventListener('click', function() {
            const loadingIndicator = document.getElementById('loading-indicator');
            const userDataContent = document.getElementById('user-data-content');

            // Show loading spinner
            loadingIndicator.innerHTML = '<div class="loading"></div> Loading user data...';
            console.log('[TC3.1] Loading user data...');

            // Simulate async data loading
            setTimeout(function() {
                loadingIndicator.innerHTML = '';
                userDataContent.innerHTML = '<p><strong>Name:</strong> Alex Johnson</p><p><strong>Role:</strong> Senior Developer</p><p><strong>Status:</strong> Active</p>';
                userDataContent.classList.add('visible');
                userDataContent.setAttribute('data-loaded', 'true');
                console.log('[TC3.2] User data loaded successfully');
            }, 1000);
        });

        // Conditional field display
        document.querySelectorAll('input[name="developer"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const conditionalField = document.getElementById('conditional-field');
                if (this.value === 'yes' && this.checked) {
                    conditionalField.classList.add('visible');
                    console.log('[TC3.4] Conditional field shown');
                } else {
                    conditionalField.classList.remove('visible');
                }
            });
        });

        document.getElementById('prog-lang').addEventListener('change', function() {
            if (this.value === 'javascript') {
                document.getElementById('dynamic-content-tests').setAttribute('data-all-loaded', 'true');
                console.log('[TC3.6] Programming language selected:', this.value);
            }
        });

        // SECTION 4: Multi-Step Form
        let currentStep = 1;
        const totalSteps = 3;

        function updateStepIndicator(step) {
            document.querySelectorAll('.step-dot').forEach(dot => {
                const dotStep = parseInt(dot.getAttribute('data-step'));
                dot.classList.remove('active', 'completed');

                if (dotStep === step) {
                    dot.classList.add('active');
                } else if (dotStep < step) {
                    dot.classList.add('completed');
                }
            });
        }

        function showStep(step) {
            document.querySelectorAll('.form-step').forEach(stepDiv => {
                stepDiv.classList.remove('active');
                if (parseInt(stepDiv.getAttribute('data-step')) === step) {
                    stepDiv.classList.add('active');
                }
            });
            updateStepIndicator(step);
            currentStep = step;
        }

        document.querySelectorAll('[data-action="next-step"]').forEach(btn => {
            btn.addEventListener('click', function() {
                // Validate current step
                const currentStepDiv = document.querySelector(`.form-step[data-step="${currentStep}"]`);
                const inputs = currentStepDiv.querySelectorAll('input[required]');
                let valid = true;

                inputs.forEach(input => {
                    if (!input.value) {
                        valid = false;
                        input.style.borderColor = '#f44336';
                    } else {
                        input.style.borderColor = '#bdc3c7';
                    }
                });

                if (valid && currentStep < totalSteps) {
                    // Update review content before showing step 3
                    if (currentStep === 2) {
                        document.getElementById('review-fullname').textContent = document.getElementById('fullname').value;
                        document.getElementById('review-email').textContent = document.getElementById('email').value;
                        document.getElementById('review-jobtitle').textContent = document.getElementById('jobtitle').value;
                        document.getElementById('review-experience').textContent = document.getElementById('experience').value;
                    }

                    showStep(currentStep + 1);
                    console.log(`[FORM] Moved to step ${currentStep}`);
                }
            });
        });

        document.querySelectorAll('[data-action="prev-step"]').forEach(btn => {
            btn.addEventListener('click', function() {
                if (currentStep > 1) {
                    showStep(currentStep - 1);
                }
            });
        });

        document.getElementById('multi-step-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const formData = {
                fullname: document.getElementById('fullname').value,
                email: document.getElementById('email').value,
                jobtitle: document.getElementById('jobtitle').value,
                experience: document.getElementById('experience').value
            };

            this.setAttribute('data-submitted', 'true');

            const formResult = document.getElementById('form-result');
            formResult.innerHTML = `
                <div class="success-box">
                    <h3>âœ“ Form Submitted Successfully!</h3>
                    <p><strong>Name:</strong> ${formData.fullname}</p>
                    <p><strong>Email:</strong> ${formData.email}</p>
                    <p><strong>Job Title:</strong> ${formData.jobtitle}</p>
                    <p><strong>Experience:</strong> ${formData.experience} years</p>
                </div>
            `;

            console.log('[TC4.8] Form submitted successfully', formData);
        });

        // Initialize
        console.log('[TEST PAGE] Advanced interaction tests loaded.');
        console.log('[AI INSTRUCTION] Complete all test sections in order: Modal â†’ Drag/Drop â†’ Dynamic Content â†’ Multi-Step Form');
    </script>
</body>
</html>
