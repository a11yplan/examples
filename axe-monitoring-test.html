<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axe-Core Monitoring Test Page - Stable & Dynamic Violations</title>
    <style>
        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        /* Status Panel */
        .status-panel {
            background: #f8f9fa;
            border: 2px solid #6c757d;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 30px;
        }

        .status-panel h2 {
            color: #2d3748;
            font-size: 1.5rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .status-item {
            padding: 12px;
            border-radius: 6px;
            border: 2px solid #e2e8f0;
            background: white;
        }

        .status-item.active {
            background: #fff5f5;
            border-color: #fc8181;
        }

        .status-item.inactive {
            background: #f0fff4;
            border-color: #68d391;
            opacity: 0.6;
        }

        .status-item .label {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .status-item .probability {
            font-size: 0.85rem;
            color: #6c757d;
        }

        .status-item .status-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }

        .status-badge.active {
            background: #fc8181;
            color: #742a2a;
        }

        .status-badge.inactive {
            background: #68d391;
            color: #22543d;
        }

        .seed-display {
            background: #edf2f7;
            padding: 10px;
            border-radius: 4px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        /* Content Area */
        .content {
            padding: 40px 30px;
        }

        /* Section Styles */
        .section {
            margin: 40px 0;
            padding: 30px;
            border-radius: 8px;
            position: relative;
        }

        .section.stable {
            background: #fff5f5;
            border: 3px solid #fc8181;
            border-left: 8px solid #f56565;
        }

        .section.dynamic {
            background: #fffaf0;
            border: 3px solid #f6ad55;
            border-left: 8px solid #ed8936;
        }

        .section.info {
            background: #f0fff4;
            border: 3px solid #68d391;
            border-left: 8px solid #48bb78;
        }

        .section h2 {
            color: #2d3748;
            font-size: 1.8rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h3 {
            color: #4a5568;
            font-size: 1.3rem;
            margin: 20px 0 10px 0;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 10px;
        }

        .badge.stable {
            background: #feb2b2;
            color: #742a2a;
        }

        .badge.dynamic {
            background: #fbd38d;
            color: #7c2d12;
        }

        .badge.wcag {
            background: #bee3f8;
            color: #2c5282;
        }

        /* Code blocks */
        .code-info {
            background: #edf2f7;
            border-left: 4px solid #4299e1;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .violation-item {
            background: white;
            padding: 15px;
            margin: 15px 0;
            border-radius: 6px;
            border: 2px solid #e2e8f0;
        }

        /* Intentional Stable Violations */

        /* STABLE VIOLATION: Low contrast text */
        .low-contrast {
            color: #d3d3d3;
            background-color: #fff;
        }

        /* STABLE VIOLATION: No focus indicator */
        .no-focus-outline:focus {
            outline: none;
        }

        /* DYNAMIC VIOLATION: Sometimes low contrast */
        .dynamic-low-contrast {
            color: #e8e8e8;
            background-color: #f0f0f0;
        }

        /* Form Styles */
        .form-group {
            margin: 15px 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2d3748;
        }

        .form-group input {
            padding: 8px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1rem;
            max-width: 300px;
        }

        /* Button Styles */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
            background: #667eea;
            color: white;
        }

        /* Table */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        table td {
            padding: 12px;
            border: 1px solid #e2e8f0;
            text-align: left;
        }

        /* Expected Results */
        .expected-results {
            background: #e6fffa;
            border: 2px solid #319795;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .expected-results h3 {
            color: #234e52;
            margin-bottom: 15px;
        }

        .expected-results ul {
            margin-left: 20px;
        }

        .expected-results li {
            margin: 8px 0;
            color: #2c5282;
        }

        .expected-results strong {
            color: #234e52;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>Axe-Core Monitoring Test Page</h1>
            <p>Stable & Dynamic Violations for Testing Recurring Detection</p>
        </header>

        <!-- Status Panel -->
        <div class="status-panel">
            <h2>üîç Dynamic Violation Status</h2>
            <p style="color: #6c757d; margin-bottom: 15px;">
                This panel shows which dynamic violations are currently active on this page load.
                Refresh the page to generate a new random state.
            </p>
            <div class="status-grid" id="status-grid">
                <!-- Populated by JavaScript -->
            </div>
            <div class="seed-display" id="seed-display">
                <!-- Populated by JavaScript -->
            </div>
        </div>

        <div class="content">
            <!-- Introduction -->
            <div class="section info">
                <h2>About This Test Page <span class="badge wcag">Info</span></h2>
                <p>
                    This page contains <strong>~20 accessibility violations</strong> designed to test
                    axe-core's monitoring capabilities including:
                </p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>Stable Violations (~80%):</strong> Always present on every page load</li>
                    <li><strong>Dynamic Violations (~20%):</strong> Appear/disappear based on weighted random probability</li>
                </ul>
                <p style="margin-top: 15px;">
                    <strong>Purpose:</strong> Test charting, recurring detection, and violation tracking across multiple page loads.
                </p>
            </div>

            <!-- Expected Results -->
            <div class="expected-results">
                <h3>üìä Expected Test Results</h3>
                <ul>
                    <li><strong>Total Stable Violations:</strong> 22 (always present, verified axe-core rules)</li>
                    <li><strong>Total Dynamic Violations:</strong> 0-7 (varies by probability)</li>
                    <li><strong>Expected Average:</strong> ~26 total violations per load</li>
                    <li><strong>Dynamic Violation Probabilities:</strong>
                        <ul style="margin-left: 20px; margin-top: 5px;">
                            <li>D1: Missing alt text (70% chance)</li>
                            <li>D2: Low contrast (50% chance)</li>
                            <li>D3: Duplicate ID (30% chance)</li>
                            <li>D4: Missing ARIA label (60% chance)</li>
                            <li>D5: Empty link (40% chance)</li>
                            <li>D6: Missing input label (55% chance)</li>
                            <li>D7: List item without parent (45% chance)</li>
                        </ul>
                    </li>
                    <li><strong>Note:</strong> All violations use proven axe-core rules for reliable detection</li>
                </ul>
            </div>

            <!-- STABLE VIOLATIONS SECTION -->
            <div class="section stable">
                <h2>üîí Stable Violations (Always Present)</h2>
                <p style="margin-bottom: 20px; color: #4a5568;">
                    These violations are consistently present on every page load to establish a baseline for monitoring.
                </p>

                <!-- S1: Missing Alt Text -->
                <div class="violation-item">
                    <h3>S1. Image Without Alt Text <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 1.1.1</span></h3>
                    <img src="https://via.placeholder.com/150"
                         width="150"
                         height="150"
                         data-test-id="S1"
                         data-violation-type="missing-alt"
                         data-stable="true" />
                    <div class="code-info">
                        <strong>Violation:</strong> Image missing alt attribute<br>
                        <strong>WCAG:</strong> 1.1.1 Non-text Content (Level A)
                    </div>
                </div>

                <!-- S2: Low Contrast Text -->
                <div class="violation-item">
                    <h3>S2. Low Contrast Text <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 1.4.3</span></h3>
                    <p class="low-contrast"
                       data-test-id="S2"
                       data-violation-type="color-contrast"
                       data-stable="true">
                        This text has insufficient contrast ratio (1.6:1) - color: #d3d3d3 on white background
                    </p>
                    <div class="code-info">
                        <strong>Violation:</strong> Text contrast ratio below 4.5:1<br>
                        <strong>WCAG:</strong> 1.4.3 Contrast (Minimum) (Level AA)
                    </div>
                </div>

                <!-- S3: Form Input Without Label -->
                <div class="violation-item">
                    <h3>S3. Input Without Label <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 1.3.1, 3.3.2</span></h3>
                    <input type="text"
                           placeholder="Input without label"
                           data-test-id="S3"
                           data-violation-type="form-label-missing"
                           data-stable="true" />
                    <div class="code-info">
                        <strong>Violation:</strong> Form input missing associated label<br>
                        <strong>WCAG:</strong> 1.3.1 Info and Relationships, 3.3.2 Labels or Instructions (Level A)
                    </div>
                </div>

                <!-- S4: Heading Hierarchy Skip -->
                <div class="violation-item">
                    <h3>S4. Heading Hierarchy Skip <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 1.3.1</span></h3>
                    <h5 data-test-id="S4"
                        data-violation-type="heading-order"
                        data-stable="true">
                        This h5 skips h4 (improper heading hierarchy)
                    </h5>
                    <div class="code-info">
                        <strong>Violation:</strong> Heading levels skipped (h3 ‚Üí h5)<br>
                        <strong>WCAG:</strong> 1.3.1 Info and Relationships (Level A)
                    </div>
                </div>

                <!-- S5 & S6: Duplicate IDs -->
                <div class="violation-item">
                    <h3>S5 & S6. Duplicate IDs <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 4.1.1</span></h3>
                    <div id="duplicate-id-stable"
                         data-test-id="S5"
                         data-violation-type="duplicate-id"
                         data-stable="true">
                        First element with ID "duplicate-id-stable"
                    </div>
                    <div id="duplicate-id-stable"
                         data-test-id="S6"
                         data-violation-type="duplicate-id"
                         data-stable="true">
                        Second element with same ID "duplicate-id-stable"
                    </div>
                    <div class="code-info">
                        <strong>Violation:</strong> Multiple elements share the same ID<br>
                        <strong>WCAG:</strong> 4.1.1 Parsing (Level A)
                    </div>
                </div>

                <!-- S7: Empty Link -->
                <div class="violation-item">
                    <h3>S7. Empty Link <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 2.4.4, 4.1.2</span></h3>
                    <a href="#"
                       data-test-id="S7"
                       data-violation-type="link-name"
                       data-stable="true"></a>
                    <div class="code-info">
                        <strong>Violation:</strong> Link has no accessible name<br>
                        <strong>WCAG:</strong> 2.4.4 Link Purpose, 4.1.2 Name, Role, Value (Level A)
                    </div>
                </div>

                <!-- S8: Empty Button -->
                <div class="violation-item">
                    <h3>S8. Empty Button <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 4.1.2</span></h3>
                    <button data-test-id="S8"
                            data-violation-type="button-name"
                            data-stable="true"></button>
                    <div class="code-info">
                        <strong>Violation:</strong> Button has no accessible name<br>
                        <strong>WCAG:</strong> 4.1.2 Name, Role, Value (Level A)
                    </div>
                </div>

                <!-- S9: Invalid ARIA Role -->
                <div class="violation-item">
                    <h3>S9. Invalid ARIA Role <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 4.1.2</span></h3>
                    <div role="banana"
                         data-test-id="S9"
                         data-violation-type="aria-allowed-role"
                         data-stable="true">
                        Element with invalid ARIA role "banana"
                    </div>
                    <div class="code-info">
                        <strong>Violation:</strong> Invalid ARIA role value "banana"<br>
                        <strong>WCAG:</strong> 4.1.2 Name, Role, Value (Level A)
                    </div>
                </div>

                <!-- S10: Invalid ARIA Attribute Value -->
                <div class="violation-item">
                    <h3>S10. Invalid ARIA Attribute Value <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 4.1.2</span></h3>
                    <button aria-pressed="maybe"
                            class="btn"
                            data-test-id="S10"
                            data-violation-type="aria-valid-attr-value"
                            data-stable="true">
                        Button with aria-pressed="maybe" (invalid value)
                    </button>
                    <div class="code-info">
                        <strong>Violation:</strong> Invalid ARIA attribute value (aria-pressed must be "true", "false", or "mixed")<br>
                        <strong>WCAG:</strong> 4.1.2 Name, Role, Value (Level A)
                    </div>
                </div>

                <!-- S11: Missing Required ARIA Child -->
                <div class="violation-item">
                    <h3>S11. Missing Required ARIA Child <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 4.1.2</span></h3>
                    <ul role="list"
                        data-test-id="S11"
                        data-violation-type="aria-required-children"
                        data-stable="true">
                        <div>List child without role="listitem"</div>
                    </ul>
                    <div class="code-info">
                        <strong>Violation:</strong> role="list" requires children with role="listitem"<br>
                        <strong>WCAG:</strong> 4.1.2 Name, Role, Value (Level A)
                    </div>
                </div>

                <!-- S12: Table Without Headers -->
                <div class="violation-item">
                    <h3>S12. Table Without Headers <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 1.3.1</span></h3>
                    <table data-test-id="S12"
                           data-violation-type="table-th"
                           data-stable="true">
                        <tr>
                            <td>Name</td>
                            <td>Age</td>
                        </tr>
                        <tr>
                            <td>John</td>
                            <td>30</td>
                        </tr>
                    </table>
                    <div class="code-info">
                        <strong>Violation:</strong> Data table missing &lt;th&gt; elements<br>
                        <strong>WCAG:</strong> 1.3.1 Info and Relationships (Level A)
                    </div>
                </div>

                <!-- S13: Another Image Without Alt -->
                <div class="violation-item">
                    <h3>S13. Second Image Without Alt <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 1.1.1</span></h3>
                    <img src="https://via.placeholder.com/120"
                         width="120"
                         height="120"
                         data-test-id="S13"
                         data-violation-type="image-alt"
                         data-stable="true" />
                    <div class="code-info">
                        <strong>Violation:</strong> Second image missing alt attribute<br>
                        <strong>WCAG:</strong> 1.1.1 Non-text Content (Level A)
                    </div>
                </div>

                <!-- S14: Another Low Contrast Element -->
                <div class="violation-item">
                    <h3>S14. Second Low Contrast Text <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 1.4.3</span></h3>
                    <p style="color: #ccc; background: #fff; padding: 10px;"
                       data-test-id="S14"
                       data-violation-type="color-contrast"
                       data-stable="true">
                        Another low contrast paragraph (color: #ccc on white, ratio ~1.9:1)
                    </p>
                    <div class="code-info">
                        <strong>Violation:</strong> Second text with insufficient contrast<br>
                        <strong>WCAG:</strong> 1.4.3 Contrast (Minimum) (Level AA)
                    </div>
                </div>

                <!-- S15: Another Input Without Label -->
                <div class="violation-item">
                    <h3>S15. Second Input Without Label <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 1.3.1, 3.3.2</span></h3>
                    <input type="email"
                           placeholder="Email without label"
                           data-test-id="S15"
                           data-violation-type="label"
                           data-stable="true" />
                    <div class="code-info">
                        <strong>Violation:</strong> Second input missing associated label<br>
                        <strong>WCAG:</strong> 1.3.1 Info and Relationships, 3.3.2 Labels or Instructions (Level A)
                    </div>
                </div>

                <!-- S16: Another Empty Link -->
                <div class="violation-item">
                    <h3>S16. Second Empty Link <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 2.4.4, 4.1.2</span></h3>
                    <a href="#"
                       data-test-id="S16"
                       data-violation-type="link-name"
                       data-stable="true"></a>
                    <div class="code-info">
                        <strong>Violation:</strong> Second link with no accessible name<br>
                        <strong>WCAG:</strong> 2.4.4 Link Purpose, 4.1.2 Name, Role, Value (Level A)
                    </div>
                </div>

                <!-- S17: Another Empty Button -->
                <div class="violation-item">
                    <h3>S17. Second Empty Button <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 4.1.2</span></h3>
                    <button data-test-id="S17"
                            data-violation-type="button-name"
                            data-stable="true"></button>
                    <div class="code-info">
                        <strong>Violation:</strong> Second button with no accessible name<br>
                        <strong>WCAG:</strong> 4.1.2 Name, Role, Value (Level A)
                    </div>
                </div>

                <!-- S18: List Item Without Parent List -->
                <div class="violation-item">
                    <h3>S18. List Item Without Parent <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 1.3.1</span></h3>
                    <li data-test-id="S18"
                        data-violation-type="listitem"
                        data-stable="true">
                        List item without &lt;ul&gt; or &lt;ol&gt; parent
                    </li>
                    <div class="code-info">
                        <strong>Violation:</strong> &lt;li&gt; element not inside &lt;ul&gt;, &lt;ol&gt;, or &lt;menu&gt;<br>
                        <strong>WCAG:</strong> 1.3.1 Info and Relationships (Level A)
                    </div>
                </div>

                <!-- S19: Third Image Without Alt -->
                <div class="violation-item">
                    <h3>S19. Third Image Without Alt <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 1.1.1</span></h3>
                    <img src="https://via.placeholder.com/100"
                         width="100"
                         height="100"
                         data-test-id="S19"
                         data-violation-type="image-alt"
                         data-stable="true" />
                    <div class="code-info">
                        <strong>Violation:</strong> Third image missing alt attribute<br>
                        <strong>WCAG:</strong> 1.1.1 Non-text Content (Level A)
                    </div>
                </div>

                <!-- S20: Third Input Without Label -->
                <div class="violation-item">
                    <h3>S20. Third Input Without Label <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 1.3.1, 3.3.2</span></h3>
                    <input type="password"
                           placeholder="Password without label"
                           data-test-id="S20"
                           data-violation-type="label"
                           data-stable="true" />
                    <div class="code-info">
                        <strong>Violation:</strong> Third input missing associated label<br>
                        <strong>WCAG:</strong> 1.3.1 Info and Relationships, 3.3.2 Labels or Instructions (Level A)
                    </div>
                </div>

                <!-- S21: Invalid Lang Attribute -->
                <div class="violation-item">
                    <h3>S21. Invalid Language Code <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 3.1.2</span></h3>
                    <p lang="xyz"
                       data-test-id="S21"
                       data-violation-type="valid-lang"
                       data-stable="true">
                        This paragraph has an invalid lang attribute value "xyz"
                    </p>
                    <div class="code-info">
                        <strong>Violation:</strong> Invalid language code in lang attribute<br>
                        <strong>WCAG:</strong> 3.1.2 Language of Parts (Level AA)
                    </div>
                </div>

                <!-- S22: ARIA Hidden on Focusable Element -->
                <div class="violation-item">
                    <h3>S22. ARIA Hidden on Focusable <span class="badge stable">Stable</span> <span class="badge wcag">WCAG 4.1.2</span></h3>
                    <button aria-hidden="true"
                            class="btn"
                            data-test-id="S22"
                            data-violation-type="aria-hidden-focus"
                            data-stable="true">
                        Focusable button with aria-hidden="true"
                    </button>
                    <div class="code-info">
                        <strong>Violation:</strong> Focusable element hidden from screen readers<br>
                        <strong>WCAG:</strong> 4.1.2 Name, Role, Value (Level A)
                    </div>
                </div>
            </div>

            <!-- DYNAMIC VIOLATIONS SECTION -->
            <div class="section dynamic">
                <h2>üé≤ Dynamic Violations (Weighted Random)</h2>
                <p style="margin-bottom: 20px; color: #4a5568;">
                    These violations appear or disappear based on weighted probabilities.
                    Check the status panel above to see which are active on this page load.
                </p>

                <!-- D1: Dynamic Missing Alt (70% chance) -->
                <div class="violation-item">
                    <h3>D1. Dynamic Missing Alt Text <span class="badge dynamic">Dynamic 70%</span> <span class="badge wcag">WCAG 1.1.1</span></h3>
                    <div id="dynamic-alt-container">
                        <!-- VIOLATION VERSION (hidden by default) -->
                        <div data-dynamic="D1-fail" style="display: none;">
                            <img src="https://via.placeholder.com/150/ff6b6b"
                                 width="150"
                                 height="150"
                                 data-test-id="D1"
                                 data-violation-type="image-alt"
                                 data-stable="false"
                                 data-probability="0.70" />
                            <p style="color: #c53030; font-weight: 600; margin-top: 10px;">‚ö†Ô∏è VIOLATION ACTIVE: Image missing alt attribute</p>
                        </div>
                        <!-- PASS VERSION (hidden by default) -->
                        <div data-dynamic="D1-pass" style="display: none;">
                            <img src="https://via.placeholder.com/150/51cf66"
                                 width="150"
                                 height="150"
                                 alt="Properly described placeholder image"
                                 data-test-id="D1-pass"
                                 data-stable="false" />
                            <p style="color: #2f855a; font-weight: 600; margin-top: 10px;">‚úÖ PASS: Image has proper alt text</p>
                        </div>
                    </div>
                    <div class="code-info">
                        <strong>Probability:</strong> 70% chance to appear<br>
                        <strong>Violation:</strong> Image conditionally missing alt attribute<br>
                        <strong>WCAG:</strong> 1.1.1 Non-text Content (Level A)
                    </div>
                </div>

                <!-- D2: Dynamic Low Contrast (50% chance) -->
                <div class="violation-item">
                    <h3>D2. Dynamic Low Contrast <span class="badge dynamic">Dynamic 50%</span> <span class="badge wcag">WCAG 1.4.3</span></h3>
                    <div id="dynamic-contrast-container">
                        <!-- VIOLATION VERSION (hidden by default) -->
                        <div data-dynamic="D2-fail" style="display: none;">
                            <p class="dynamic-low-contrast"
                               data-test-id="D2"
                               data-violation-type="color-contrast"
                               data-stable="false"
                               data-probability="0.50">
                                This text has very low contrast (1.2:1) - color: #e8e8e8 on #f0f0f0 background
                            </p>
                            <p style="color: #c53030; font-weight: 600; margin-top: 10px;">‚ö†Ô∏è VIOLATION ACTIVE: Low contrast ratio</p>
                        </div>
                        <!-- PASS VERSION (hidden by default) -->
                        <div data-dynamic="D2-pass" style="display: none;">
                            <p style="color: #2d3748; background: #fff; padding: 10px;"
                               data-test-id="D2-pass"
                               data-stable="false">
                                This text has good contrast (readable)
                            </p>
                            <p style="color: #2f855a; font-weight: 600; margin-top: 10px;">‚úÖ PASS: Sufficient contrast ratio</p>
                        </div>
                    </div>
                    <div class="code-info">
                        <strong>Probability:</strong> 50% chance to appear<br>
                        <strong>Violation:</strong> Text conditionally has low contrast<br>
                        <strong>WCAG:</strong> 1.4.3 Contrast (Minimum) (Level AA)
                    </div>
                </div>

                <!-- D3: Dynamic Duplicate ID (30% chance) -->
                <div class="violation-item">
                    <h3>D3. Dynamic Duplicate ID <span class="badge dynamic">Dynamic 30%</span> <span class="badge wcag">WCAG 4.1.1</span></h3>
                    <div id="duplicate-id-fixed">First element with fixed ID</div>
                    <div id="dynamic-duplicate-container">
                        <!-- VIOLATION VERSION (hidden by default) -->
                        <div data-dynamic="D3-fail" style="display: none;">
                            <div id="duplicate-id-fixed"
                                 data-test-id="D3"
                                 data-violation-type="duplicate-id"
                                 data-stable="false"
                                 data-probability="0.30">
                                Second element with duplicate ID "duplicate-id-fixed"
                            </div>
                            <p style="color: #c53030; font-weight: 600; margin-top: 10px;">‚ö†Ô∏è VIOLATION ACTIVE: Duplicate ID created</p>
                        </div>
                        <!-- PASS VERSION (hidden by default) -->
                        <div data-dynamic="D3-pass" style="display: none;">
                            <div id="unique-dynamic-id" data-test-id="D3-pass" data-stable="false">
                                Element with unique ID "unique-dynamic-id"
                            </div>
                            <p style="color: #2f855a; font-weight: 600; margin-top: 10px;">‚úÖ PASS: No duplicate ID</p>
                        </div>
                    </div>
                    <div class="code-info">
                        <strong>Probability:</strong> 30% chance to appear<br>
                        <strong>Violation:</strong> Conditionally creates duplicate ID<br>
                        <strong>WCAG:</strong> 4.1.1 Parsing (Level A)
                    </div>
                </div>

                <!-- D4: Dynamic Missing ARIA Label (60% chance) -->
                <div class="violation-item">
                    <h3>D4. Dynamic Missing ARIA Label <span class="badge dynamic">Dynamic 60%</span> <span class="badge wcag">WCAG 4.1.2</span></h3>
                    <div id="dynamic-aria-container">
                        <!-- VIOLATION VERSION (hidden by default) -->
                        <div data-dynamic="D4-fail" style="display: none;">
                            <button class="btn"
                                    data-test-id="D4"
                                    data-violation-type="button-name"
                                    data-stable="false"
                                    data-probability="0.60">
                                ‚öôÔ∏è
                            </button>
                            <p style="color: #c53030; font-weight: 600; margin-top: 10px;">‚ö†Ô∏è VIOLATION ACTIVE: Button missing aria-label</p>
                        </div>
                        <!-- PASS VERSION (hidden by default) -->
                        <div data-dynamic="D4-pass" style="display: none;">
                            <button class="btn"
                                    aria-label="Settings"
                                    data-test-id="D4-pass"
                                    data-stable="false">
                                ‚öôÔ∏è
                            </button>
                            <p style="color: #2f855a; font-weight: 600; margin-top: 10px;">‚úÖ PASS: Button has aria-label</p>
                        </div>
                    </div>
                    <div class="code-info">
                        <strong>Probability:</strong> 60% chance to appear<br>
                        <strong>Violation:</strong> Button conditionally missing aria-label<br>
                        <strong>WCAG:</strong> 4.1.2 Name, Role, Value (Level A)
                    </div>
                </div>

                <!-- D5: Dynamic Empty Link (40% chance) -->
                <div class="violation-item">
                    <h3>D5. Dynamic Empty Link <span class="badge dynamic">Dynamic 40%</span> <span class="badge wcag">WCAG 2.4.4</span></h3>
                    <div id="dynamic-link-container">
                        <!-- VIOLATION VERSION (hidden by default) -->
                        <div data-dynamic="D5-fail" style="display: none;">
                            <a href="#"
                               data-test-id="D5"
                               data-violation-type="link-name"
                               data-stable="false"
                               data-probability="0.40"></a>
                            <p style="color: #c53030; font-weight: 600; margin-top: 10px;">‚ö†Ô∏è VIOLATION ACTIVE: Empty link</p>
                        </div>
                        <!-- PASS VERSION (hidden by default) -->
                        <div data-dynamic="D5-pass" style="display: none;">
                            <a href="#" data-test-id="D5-pass" data-stable="false">Link with text</a>
                            <p style="color: #2f855a; font-weight: 600; margin-top: 10px;">‚úÖ PASS: Link has text content</p>
                        </div>
                    </div>
                    <div class="code-info">
                        <strong>Probability:</strong> 40% chance to appear<br>
                        <strong>Violation:</strong> Link conditionally empty<br>
                        <strong>WCAG:</strong> 2.4.4 Link Purpose (Level A)
                    </div>
                </div>

                <!-- D6: Dynamic Missing Input Label (55% chance) -->
                <div class="violation-item">
                    <h3>D6. Dynamic Missing Input Label <span class="badge dynamic">Dynamic 55%</span> <span class="badge wcag">WCAG 1.3.1, 3.3.2</span></h3>
                    <div id="dynamic-input-container">
                        <!-- VIOLATION VERSION (hidden by default) -->
                        <div data-dynamic="D6-fail" style="display: none;">
                            <input type="text"
                                   placeholder="Dynamic input without label"
                                   data-test-id="D6"
                                   data-violation-type="label"
                                   data-stable="false"
                                   data-probability="0.55" />
                            <p style="color: #c53030; font-weight: 600; margin-top: 10px;">‚ö†Ô∏è VIOLATION ACTIVE: Input missing label</p>
                        </div>
                        <!-- PASS VERSION (hidden by default) -->
                        <div data-dynamic="D6-pass" style="display: none;">
                            <label for="dynamic-input-pass">Dynamic Input Label</label>
                            <input type="text"
                                   id="dynamic-input-pass"
                                   placeholder="Input with label"
                                   data-test-id="D6-pass"
                                   data-stable="false" />
                            <p style="color: #2f855a; font-weight: 600; margin-top: 10px;">‚úÖ PASS: Input has associated label</p>
                        </div>
                    </div>
                    <div class="code-info">
                        <strong>Probability:</strong> 55% chance to appear<br>
                        <strong>Violation:</strong> Input conditionally missing label<br>
                        <strong>WCAG:</strong> 1.3.1 Info and Relationships, 3.3.2 Labels or Instructions (Level A)
                    </div>
                </div>

                <!-- D7: Dynamic List Item Without Parent (45% chance) -->
                <div class="violation-item">
                    <h3>D7. Dynamic List Item Without Parent <span class="badge dynamic">Dynamic 45%</span> <span class="badge wcag">WCAG 1.3.1</span></h3>
                    <div id="dynamic-listitem-container">
                        <!-- VIOLATION VERSION (hidden by default) -->
                        <div data-dynamic="D7-fail" style="display: none;">
                            <li data-test-id="D7"
                                data-violation-type="listitem"
                                data-stable="false"
                                data-probability="0.45">
                                Dynamic list item without &lt;ul&gt; or &lt;ol&gt; parent
                            </li>
                            <p style="color: #c53030; font-weight: 600; margin-top: 10px;">‚ö†Ô∏è VIOLATION ACTIVE: List item without parent</p>
                        </div>
                        <!-- PASS VERSION (hidden by default) -->
                        <div data-dynamic="D7-pass" style="display: none;">
                            <ul>
                                <li data-test-id="D7-pass" data-stable="false">Dynamic list item with proper parent</li>
                            </ul>
                            <p style="color: #2f855a; font-weight: 600; margin-top: 10px;">‚úÖ PASS: List item has proper parent</p>
                        </div>
                    </div>
                    <div class="code-info">
                        <strong>Probability:</strong> 45% chance to appear<br>
                        <strong>Violation:</strong> &lt;li&gt; conditionally without parent list<br>
                        <strong>WCAG:</strong> 1.3.1 Info and Relationships (Level A)
                    </div>
                </div>
            </div>

            <!-- Summary -->
            <div class="section info">
                <h2>üìã Summary</h2>
                <p><strong>Stable Violations (22 total - Always Present):</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>S1: Missing alt text (image-alt)</li>
                    <li>S2: Low contrast text (color-contrast)</li>
                    <li>S3: Input without label (label)</li>
                    <li>S4: Heading hierarchy skip (heading-order)</li>
                    <li>S5-S6: Duplicate IDs (duplicate-id) - counts as 1 violation</li>
                    <li>S7: Empty link (link-name)</li>
                    <li>S8: Empty button (button-name)</li>
                    <li>S9: Invalid ARIA role "banana" (aria-allowed-role)</li>
                    <li>S10: Invalid ARIA attribute value (aria-valid-attr-value)</li>
                    <li>S11: Missing required ARIA child (aria-required-children)</li>
                    <li>S12: Table without headers (table-th)</li>
                    <li>S13: Second image without alt (image-alt)</li>
                    <li>S14: Second low contrast element (color-contrast)</li>
                    <li>S15: Second input without label (label)</li>
                    <li>S16: Second empty link (link-name)</li>
                    <li>S17: Second empty button (button-name)</li>
                    <li>S18: List item without parent (listitem)</li>
                    <li>S19: Third image without alt (image-alt)</li>
                    <li>S20: Third input without label (label)</li>
                    <li>S21: Invalid language code (valid-lang)</li>
                    <li>S22: ARIA hidden on focusable element (aria-hidden-focus)</li>
                </ul>

                <p style="margin-top: 20px;"><strong>Dynamic Violations (7 total - Probability-Based):</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>D1: Dynamic missing alt (70%)</li>
                    <li>D2: Dynamic low contrast (50%)</li>
                    <li>D3: Dynamic duplicate ID (30%)</li>
                    <li>D4: Dynamic missing ARIA label (60%)</li>
                    <li>D5: Dynamic empty link (40%)</li>
                    <li>D6: Dynamic missing input label (55%)</li>
                    <li>D7: Dynamic list item without parent (45%)</li>
                </ul>

                <p style="margin-top: 20px; color: #4a5568;">
                    <strong>Expected Results:</strong> 22-29 violations per load (22 stable + 0-7 dynamic)
                </p>

                <p style="margin-top: 15px; color: #4a5568;">
                    <strong>Testing Strategy:</strong> Run axe-core monitoring across 20-30 page loads to verify:
                </p>
                <ul style="margin-left: 20px; margin-top: 10px; color: #4a5568;">
                    <li>All 22 stable violations consistently detected</li>
                    <li>Dynamic violations appear at expected frequencies</li>
                    <li>Charting accurately reflects violation trends over time</li>
                    <li>Recurring detection properly identifies patterns</li>
                    <li>Hash matching works correctly for stable violations</li>
                </ul>
            </div>
        </div>

        <!-- Footer -->
        <footer style="background: #2d3748; color: white; padding: 30px; text-align: center;">
            <p>Axe-Core Monitoring Test Page - Stable & Dynamic Violations</p>
            <p style="margin-top: 10px; opacity: 0.8;">
                For testing violation tracking, charting, and recurring detection
            </p>
        </footer>
    </div>

    <script>
        // Configuration for dynamic violations
        const dynamicViolations = [
            { id: 'D1', name: 'Missing Alt Text', probability: 0.70, type: 'image-alt' },
            { id: 'D2', name: 'Low Contrast', probability: 0.50, type: 'color-contrast' },
            { id: 'D3', name: 'Duplicate ID', probability: 0.30, type: 'duplicate-id' },
            { id: 'D4', name: 'Missing ARIA Label', probability: 0.60, type: 'button-name' },
            { id: 'D5', name: 'Empty Link', probability: 0.40, type: 'link-name' },
            { id: 'D6', name: 'Missing Input Label', probability: 0.55, type: 'label' },
            { id: 'D7', name: 'List Item Without Parent', probability: 0.45, type: 'listitem' }
        ];

        // Generate seed for reproducibility
        const seed = Math.floor(Math.random() * 1000000);

        // Simple seeded random number generator
        function seededRandom(seed) {
            let x = Math.sin(seed++) * 10000;
            return x - Math.floor(x);
        }

        // Determine which violations are active
        const activeViolations = {};
        dynamicViolations.forEach((violation, index) => {
            const random = seededRandom(seed + index);
            activeViolations[violation.id] = random < violation.probability;
        });

        // Update status panel
        const statusGrid = document.getElementById('status-grid');
        dynamicViolations.forEach(violation => {
            const isActive = activeViolations[violation.id];
            const statusItem = document.createElement('div');
            statusItem.className = `status-item ${isActive ? 'active' : 'inactive'}`;
            statusItem.innerHTML = `
                <div class="label">
                    ${violation.id}: ${violation.name}
                    <span class="status-badge ${isActive ? 'active' : 'inactive'}">
                        ${isActive ? 'ACTIVE' : 'INACTIVE'}
                    </span>
                </div>
                <div class="probability">Probability: ${(violation.probability * 100).toFixed(0)}%</div>
            `;
            statusGrid.appendChild(statusItem);
        });

        // Display seed
        document.getElementById('seed-display').textContent = `Random Seed: ${seed} (for reproducibility)`;

        // Show/hide dynamic violations based on active state
        // Both versions exist in HTML, we just toggle visibility

        // D1: Dynamic Missing Alt (70%)
        if (activeViolations['D1']) {
            document.querySelector('[data-dynamic="D1-fail"]').style.display = 'block';
            document.querySelector('[data-dynamic="D1-pass"]').style.display = 'none';
            console.log('‚úÖ D1 (Missing Alt): VIOLATION active');
        } else {
            document.querySelector('[data-dynamic="D1-fail"]').style.display = 'none';
            document.querySelector('[data-dynamic="D1-pass"]').style.display = 'block';
            console.log('‚ùå D1 (Missing Alt): PASS active');
        }

        // D2: Dynamic Low Contrast (50%)
        if (activeViolations['D2']) {
            document.querySelector('[data-dynamic="D2-fail"]').style.display = 'block';
            document.querySelector('[data-dynamic="D2-pass"]').style.display = 'none';
            console.log('‚úÖ D2 (Low Contrast): VIOLATION active');
        } else {
            document.querySelector('[data-dynamic="D2-fail"]').style.display = 'none';
            document.querySelector('[data-dynamic="D2-pass"]').style.display = 'block';
            console.log('‚ùå D2 (Low Contrast): PASS active');
        }

        // D3: Dynamic Duplicate ID (30%)
        if (activeViolations['D3']) {
            document.querySelector('[data-dynamic="D3-fail"]').style.display = 'block';
            document.querySelector('[data-dynamic="D3-pass"]').style.display = 'none';
            console.log('‚úÖ D3 (Duplicate ID): VIOLATION active');
        } else {
            document.querySelector('[data-dynamic="D3-fail"]').style.display = 'none';
            document.querySelector('[data-dynamic="D3-pass"]').style.display = 'block';
            console.log('‚ùå D3 (Duplicate ID): PASS active');
        }

        // D4: Dynamic Missing ARIA Label (60%)
        if (activeViolations['D4']) {
            document.querySelector('[data-dynamic="D4-fail"]').style.display = 'block';
            document.querySelector('[data-dynamic="D4-pass"]').style.display = 'none';
            console.log('‚úÖ D4 (Missing ARIA Label): VIOLATION active');
        } else {
            document.querySelector('[data-dynamic="D4-fail"]').style.display = 'none';
            document.querySelector('[data-dynamic="D4-pass"]').style.display = 'block';
            console.log('‚ùå D4 (Missing ARIA Label): PASS active');
        }

        // D5: Dynamic Empty Link (40%)
        if (activeViolations['D5']) {
            document.querySelector('[data-dynamic="D5-fail"]').style.display = 'block';
            document.querySelector('[data-dynamic="D5-pass"]').style.display = 'none';
            console.log('‚úÖ D5 (Empty Link): VIOLATION active');
        } else {
            document.querySelector('[data-dynamic="D5-fail"]').style.display = 'none';
            document.querySelector('[data-dynamic="D5-pass"]').style.display = 'block';
            console.log('‚ùå D5 (Empty Link): PASS active');
        }

        // D6: Dynamic Missing Input Label (55%)
        if (activeViolations['D6']) {
            document.querySelector('[data-dynamic="D6-fail"]').style.display = 'block';
            document.querySelector('[data-dynamic="D6-pass"]').style.display = 'none';
            console.log('‚úÖ D6 (Missing Input Label): VIOLATION active');
        } else {
            document.querySelector('[data-dynamic="D6-fail"]').style.display = 'none';
            document.querySelector('[data-dynamic="D6-pass"]').style.display = 'block';
            console.log('‚ùå D6 (Missing Input Label): PASS active');
        }

        // D7: Dynamic List Item Without Parent (45%)
        if (activeViolations['D7']) {
            document.querySelector('[data-dynamic="D7-fail"]').style.display = 'block';
            document.querySelector('[data-dynamic="D7-pass"]').style.display = 'none';
            console.log('‚úÖ D7 (List Item Without Parent): VIOLATION active');
        } else {
            document.querySelector('[data-dynamic="D7-fail"]').style.display = 'none';
            document.querySelector('[data-dynamic="D7-pass"]').style.display = 'block';
            console.log('‚ùå D7 (List Item Without Parent): PASS active');
        }

        // Console logging for debugging
        console.log('üîç Axe-Core Monitoring Test Page Loaded');
        console.log('Seed:', seed);
        console.log('Active Dynamic Violations:', activeViolations);
        console.log('Expected Total Violations:', 22 + Object.values(activeViolations).filter(Boolean).length);

        // Log all test IDs for validation
        const allTestIds = Array.from(document.querySelectorAll('[data-test-id]'))
            .map(el => ({
                testId: el.getAttribute('data-test-id'),
                violationType: el.getAttribute('data-violation-type'),
                stable: el.getAttribute('data-stable') === 'true'
            }));
        console.log('All Test Elements:', allTestIds);
    </script>
</body>
</html>
