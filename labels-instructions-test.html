<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WCAG 3.3.2 - Labels or Instructions Test Page</title>

    <!-- Machine-readable metadata -->
    <meta name="test:wcag-criterion" content="3.3.2">
    <meta name="test:total-cases" content="10">
    <meta name="test:expected-violations" content="5">
    <meta name="test:expected-passes" content="5">

    <style>
        /* Base styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            color: #212529;
            border-bottom: 4px solid #0d6efd;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .header-info {
            background: #e7f1ff;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #0d6efd;
            margin-bottom: 30px;
        }

        .header-info p {
            margin: 5px 0;
            color: #495057;
        }

        /* Test grid - Side-by-side pattern */
        .test-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0 40px 0;
        }

        .test-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 2px solid #dee2e6;
        }

        .test-card.fail {
            border-color: #dc3545;
            background: #fff5f5;
        }

        .test-card.pass {
            border-color: #198754;
            background: #f0fff4;
        }

        .test-card h3 {
            margin-top: 0;
            color: #212529;
            font-size: 1.1rem;
        }

        .test-sample {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin: 15px 0;
            border: 1px solid #dee2e6;
        }

        .test-sample label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .test-sample input,
        .test-sample textarea,
        .test-sample select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
            margin-bottom: 15px;
        }

        .instructions {
            background: #fff3cd;
            padding: 10px;
            border-radius: 4px;
            border-left: 3px solid #ffc107;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .code-block {
            background-color: #2d2d2d;
            color: #d4d4d4;
            padding: 12px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin-top: 12px;
            overflow-x: auto;
        }

        .code-block .tag {
            color: #569cd6;
        }

        .code-block .attr {
            color: #9cdcfe;
        }

        .code-block .string {
            color: #ce9178;
        }

        .code-block .comment {
            color: #6a9955;
        }

        .expected-results {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-top: 40px;
            border: 2px solid #0d6efd;
        }

        .expected-results h3 {
            color: #0d6efd;
            margin-top: 0;
        }

        .expected-results ul {
            margin: 10px 0;
        }

        .expected-results li {
            margin: 8px 0;
            color: #495057;
        }

        .violation-list {
            list-style-type: none;
            padding-left: 20px;
        }

        .violation-list li {
            padding: 5px 0;
            border-left: 3px solid #dc3545;
            padding-left: 10px;
            margin: 5px 0;
            background: #fff5f5;
        }

        .pass-list {
            list-style-type: none;
            padding-left: 20px;
        }

        .pass-list li {
            padding: 5px 0;
            border-left: 3px solid #198754;
            padding-left: 10px;
            margin: 5px 0;
            background: #f0fff4;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè∑Ô∏è WCAG 3.3.2 - Labels or Instructions Test Page</h1>

        <div class="header-info"
             data-wcag-criterion="3.3.2"
             data-total-test-cases="10"
             data-expected-violations="5"
             data-expected-passes="5">
            <p><strong>Testing: WCAG 3.3.2 - Labels or Instructions (Level A)</strong></p>
            <p><strong>Requirement:</strong> Labels or instructions are provided when content requires user input</p>
            <p><strong>Why it matters:</strong> Users need clear guidance on what information to provide and in what format. Missing or unclear labels cause confusion and errors.</p>
            <p>This page contains <strong>10 test cases</strong> (5 violations, 5 passes) demonstrating proper vs missing/unclear labels and instructions.</p>
        </div>

        <h2>üîç Test Case 1: Text Input Without Label</h2>
        <div class="test-grid">
            <!-- FAIL: No label -->
            <div class="test-card fail"
                 data-test-id="TC1.1"
                 data-expected-result="violation"
                 data-wcag-criterion="3.3.2">
                <h3>‚ùå FAIL: Input Without Label</h3>
                <div class="test-sample">
                    <input type="text" placeholder="Enter here">
                </div>
                <p><strong>Issue:</strong> No label element. Placeholder disappears on input and isn't accessible to all users.</p>
                <div class="code-block"><span class="tag">&lt;input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"Enter here"</span><span class="tag">&gt;</span>
<span class="comment">&lt;!-- No label element! --&gt;</span></div>
            </div>

            <!-- PASS: With label -->
            <div class="test-card pass"
                 data-test-id="TC2.1"
                 data-expected-result="pass"
                 data-wcag-criterion="3.3.2">
                <h3>‚úÖ PASS: Input With Clear Label</h3>
                <div class="test-sample">
                    <label for="email-pass">Email Address</label>
                    <input type="email" id="email-pass" placeholder="you@example.com">
                </div>
                <p><strong>Why it passes:</strong> Clear label element tells users what information is needed.</p>
                <div class="code-block"><span class="tag">&lt;label</span> <span class="attr">for</span>=<span class="string">"email-pass"</span><span class="tag">&gt;</span>Email Address<span class="tag">&lt;/label&gt;</span>
<span class="tag">&lt;input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">id</span>=<span class="string">"email-pass"</span><span class="tag">&gt;</span></div>
            </div>
        </div>

        <h2>üîç Test Case 2: Date Format Instructions</h2>
        <div class="test-grid">
            <!-- FAIL: No format instructions -->
            <div class="test-card fail"
                 data-test-id="TC1.2"
                 data-expected-result="violation"
                 data-wcag-criterion="3.3.2">
                <h3>‚ùå FAIL: Date Input Without Format</h3>
                <div class="test-sample">
                    <label for="date-fail">Birth Date</label>
                    <input type="text" id="date-fail">
                </div>
                <p><strong>Issue:</strong> No indication of required date format (MM/DD/YYYY, DD-MM-YYYY, etc.). Users must guess.</p>
                <div class="code-block"><span class="tag">&lt;label&gt;</span>Birth Date<span class="tag">&lt;/label&gt;</span>
<span class="tag">&lt;input</span> <span class="attr">type</span>=<span class="string">"text"</span><span class="tag">&gt;</span>
<span class="comment">&lt;!-- No format instructions --&gt;</span></div>
            </div>

            <!-- PASS: With format instructions -->
            <div class="test-card pass"
                 data-test-id="TC2.2"
                 data-expected-result="pass"
                 data-wcag-criterion="3.3.2">
                <h3>‚úÖ PASS: Date With Format Instructions</h3>
                <div class="test-sample">
                    <label for="date-pass">Birth Date (MM/DD/YYYY)</label>
                    <input type="text" id="date-pass" placeholder="12/31/1990">
                    <div class="instructions">Enter date in MM/DD/YYYY format</div>
                </div>
                <p><strong>Why it passes:</strong> Format clearly specified in label and helper text.</p>
                <div class="code-block"><span class="tag">&lt;label&gt;</span>Birth Date (MM/DD/YYYY)<span class="tag">&lt;/label&gt;</span>
<span class="tag">&lt;input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"12/31/1990"</span><span class="tag">&gt;</span>
<span class="tag">&lt;div&gt;</span>Enter date in MM/DD/YYYY format<span class="tag">&lt;/div&gt;</span></div>
            </div>
        </div>

        <h2>üîç Test Case 3: Password Requirements</h2>
        <div class="test-grid">
            <!-- FAIL: No password requirements -->
            <div class="test-card fail"
                 data-test-id="TC1.3"
                 data-expected-result="violation"
                 data-wcag-criterion="3.3.2">
                <h3>‚ùå FAIL: Password Without Requirements</h3>
                <div class="test-sample">
                    <label for="password-fail">Create Password</label>
                    <input type="password" id="password-fail">
                </div>
                <p><strong>Issue:</strong> No guidance on password requirements (length, characters, etc.). Users learn only after error.</p>
                <div class="code-block"><span class="tag">&lt;label&gt;</span>Create Password<span class="tag">&lt;/label&gt;</span>
<span class="tag">&lt;input</span> <span class="attr">type</span>=<span class="string">"password"</span><span class="tag">&gt;</span>
<span class="comment">&lt;!-- Missing password requirements --&gt;</span></div>
            </div>

            <!-- PASS: With clear requirements -->
            <div class="test-card pass"
                 data-test-id="TC2.3"
                 data-expected-result="pass"
                 data-wcag-criterion="3.3.2">
                <h3>‚úÖ PASS: Password With Requirements</h3>
                <div class="test-sample">
                    <label for="password-pass">Create Password</label>
                    <div class="instructions">
                        Password must contain:
                        <ul style="margin: 5px 0; padding-left: 20px;">
                            <li>At least 8 characters</li>
                            <li>One uppercase letter</li>
                            <li>One number</li>
                        </ul>
                    </div>
                    <input type="password" id="password-pass">
                </div>
                <p><strong>Why it passes:</strong> Clear instructions before input field explain all requirements.</p>
                <div class="code-block"><span class="tag">&lt;div&gt;</span>Password must contain: ...<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;input</span> <span class="attr">type</span>=<span class="string">"password"</span><span class="tag">&gt;</span></div>
            </div>
        </div>

        <h2>üîç Test Case 4: Required Field Indicators</h2>
        <div class="test-grid">
            <!-- FAIL: No required indicator -->
            <div class="test-card fail"
                 data-test-id="TC1.4"
                 data-expected-result="violation"
                 data-wcag-criterion="3.3.2">
                <h3>‚ùå FAIL: No Required Field Indication</h3>
                <div class="test-sample">
                    <label for="name-fail">Full Name</label>
                    <input type="text" id="name-fail" required>
                    <label for="phone-fail">Phone Number</label>
                    <input type="tel" id="phone-fail">
                </div>
                <p><strong>Issue:</strong> No indication of which fields are required vs optional. Users discover only on submit.</p>
                <div class="code-block"><span class="tag">&lt;input</span> <span class="attr">required</span><span class="tag">&gt;</span>
<span class="comment">&lt;!-- Required attribute but no visual/text indicator --&gt;</span></div>
            </div>

            <!-- PASS: Clear required indicators -->
            <div class="test-card pass"
                 data-test-id="TC2.4"
                 data-expected-result="pass"
                 data-wcag-criterion="3.3.2">
                <h3>‚úÖ PASS: Clear Required Field Indicators</h3>
                <div class="test-sample">
                    <div class="instructions">* indicates required field</div>
                    <label for="name-pass">Full Name *</label>
                    <input type="text" id="name-pass" required>
                    <label for="phone-pass">Phone Number (optional)</label>
                    <input type="tel" id="phone-pass">
                </div>
                <p><strong>Why it passes:</strong> Legend explains * symbol, and required fields are clearly marked.</p>
                <div class="code-block"><span class="tag">&lt;div&gt;</span>* indicates required field<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;label&gt;</span>Full Name *<span class="tag">&lt;/label&gt;</span>
<span class="tag">&lt;label&gt;</span>Phone Number (optional)<span class="tag">&lt;/label&gt;</span></div>
            </div>
        </div>

        <h2>üîç Test Case 5: Text Area Character Limit</h2>
        <div class="test-grid">
            <!-- FAIL: No character limit info -->
            <div class="test-card fail"
                 data-test-id="TC1.5"
                 data-expected-result="violation"
                 data-wcag-criterion="3.3.2">
                <h3>‚ùå FAIL: Text Area Without Limit Info</h3>
                <div class="test-sample">
                    <label for="comment-fail">Comments</label>
                    <textarea id="comment-fail" maxlength="200" rows="4"></textarea>
                </div>
                <p><strong>Issue:</strong> maxlength enforced but not communicated. Users type too much and get cut off.</p>
                <div class="code-block"><span class="tag">&lt;textarea</span> <span class="attr">maxlength</span>=<span class="string">"200"</span><span class="tag">&gt;&lt;/textarea&gt;</span>
<span class="comment">&lt;!-- Limit exists but not communicated --&gt;</span></div>
            </div>

            <!-- PASS: Clear character limit -->
            <div class="test-card pass"
                 data-test-id="TC2.5"
                 data-expected-result="pass"
                 data-wcag-criterion="3.3.2">
                <h3>‚úÖ PASS: Text Area With Limit Info</h3>
                <div class="test-sample">
                    <label for="comment-pass">Comments (200 characters maximum)</label>
                    <textarea id="comment-pass" maxlength="200" rows="4"></textarea>
                    <div class="instructions">200 characters remaining</div>
                </div>
                <p><strong>Why it passes:</strong> Character limit shown in label and below field.</p>
                <div class="code-block"><span class="tag">&lt;label&gt;</span>Comments (200 characters maximum)<span class="tag">&lt;/label&gt;</span>
<span class="tag">&lt;textarea</span> <span class="attr">maxlength</span>=<span class="string">"200"</span><span class="tag">&gt;&lt;/textarea&gt;</span>
<span class="tag">&lt;div&gt;</span>200 characters remaining<span class="tag">&lt;/div&gt;</span></div>
            </div>
        </div>

        <!-- Expected Results Section -->
        <div class="expected-results"
             data-total-test-cases="10"
             data-expected-violations="5"
             data-expected-passes="5">

            <h3>üìä Expected Test Results</h3>

            <div class="results-summary">
                <ul>
                    <li><strong>Total Test Cases:</strong> 10</li>
                    <li><strong>Expected Violations:</strong> 5
                        <ul class="violation-list">
                            <li><strong>TC1.1</strong> - Input without label element</li>
                            <li><strong>TC1.2</strong> - Date field without format instructions</li>
                            <li><strong>TC1.3</strong> - Password field without requirements</li>
                            <li><strong>TC1.4</strong> - No required field indicators</li>
                            <li><strong>TC1.5</strong> - Text area without character limit info</li>
                        </ul>
                    </li>
                    <li><strong>Expected Passes:</strong> 5
                        <ul class="pass-list">
                            <li><strong>TC2.1</strong> - Input with clear label</li>
                            <li><strong>TC2.2</strong> - Date with format in label and helper text</li>
                            <li><strong>TC2.3</strong> - Password with detailed requirements</li>
                            <li><strong>TC2.4</strong> - Clear required field indicators with legend</li>
                            <li><strong>TC2.5</strong> - Text area with character limit shown</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <h4>Detection Method</h4>
            <p><strong>Automated detection can identify:</strong></p>
            <ul>
                <li>Input elements without associated label elements</li>
                <li>Form fields with maxlength but no visible character count</li>
                <li>Password inputs without requirement text</li>
                <li>Date/time inputs without format guidance</li>
                <li>Required fields without visual indicators</li>
            </ul>

            <h4>Common Violations</h4>
            <ul>
                <li>Relying only on placeholder text (disappears on input)</li>
                <li>Password requirements shown only after error</li>
                <li>Date format not specified</li>
                <li>Required fields not indicated</li>
                <li>Character limits enforced but not communicated</li>
                <li>File upload without accepted formats listed</li>
                <li>Complex inputs without examples</li>
            </ul>

            <h4>Best Practices</h4>
            <p><strong>Good labels and instructions should:</strong></p>
            <ul>
                <li>Use proper &lt;label&gt; elements (not just placeholder)</li>
                <li>Provide format requirements before input (not after error)</li>
                <li>Indicate required vs optional fields clearly</li>
                <li>Show character/file size limits upfront</li>
                <li>Include examples for complex formats</li>
                <li>Use accessible helper text (aria-describedby)</li>
            </ul>

            <h4>Types of Instructions to Provide</h4>
            <ul>
                <li><strong>Format:</strong> Date format, phone format, etc.</li>
                <li><strong>Requirements:</strong> Password rules, validation criteria</li>
                <li><strong>Constraints:</strong> Character limits, file size limits</li>
                <li><strong>Required vs Optional:</strong> Which fields must be filled</li>
                <li><strong>Examples:</strong> Show correct format examples</li>
                <li><strong>Context:</strong> Why information is needed</li>
            </ul>

            <h4>Implementation Methods</h4>
            <p><strong>Ways to provide instructions:</strong></p>
            <ul>
                <li>In the label text: "Birth Date (MM/DD/YYYY)"</li>
                <li>Helper text below field with aria-describedby</li>
                <li>Placeholder showing format example</li>
                <li>Fieldset legend for grouped inputs</li>
                <li>Form-level instructions above form</li>
            </ul>

            <h4>Note on Placeholders</h4>
            <p>Placeholder text should NOT be used as the only label because:</p>
            <ul>
                <li>Disappears when user starts typing</li>
                <li>May have insufficient color contrast</li>
                <li>Not reliably announced by all screen readers</li>
                <li>Confusing if it looks like pre-filled data</li>
            </ul>
            <p>Use placeholders for <strong>examples</strong>, not as replacement for labels.</p>
        </div>
    </div>

    <script>
        // Machine-readable test metadata
        window.testMetadata = {
            wcagCriterion: '3.3.2',
            criterionName: 'Labels or Instructions',
            level: 'A',
            totalCases: 10,
            expectedViolations: 5,
            expectedPasses: 5,
            testCases: []
        };

        // Parse all test cases
        document.querySelectorAll('[data-test-id]').forEach(testCard => {
            const testCase = {
                id: testCard.dataset.testId,
                expectedResult: testCard.dataset.expectedResult,
                criterion: testCard.dataset.wcagCriterion
            };
            window.testMetadata.testCases.push(testCase);
        });

        // Export function for validation scripts
        window.getTestMetadata = function() {
            return window.testMetadata;
        };

        console.log('‚úÖ WCAG 3.3.2 - Labels or Instructions test page loaded');
        console.log('üìä Test metadata:', window.testMetadata);
        console.log('üîç Use window.getTestMetadata() to access test data');
        console.log('üè∑Ô∏è Key: Provide labels and instructions for all user inputs');
    </script>
</body>
</html>
