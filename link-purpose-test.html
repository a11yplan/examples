<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WCAG 2.4.4 - Link Purpose (In Context) Test Page</title>

    <!-- Machine-readable metadata -->
    <meta name="test:wcag-criterion" content="2.4.4">
    <meta name="test:total-cases" content="10">
    <meta name="test:expected-violations" content="5">
    <meta name="test:expected-passes" content="5">

    <style>
        /* Base styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            color: #212529;
            border-bottom: 4px solid #0d6efd;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .header-info {
            background: #e7f1ff;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #0d6efd;
            margin-bottom: 30px;
        }

        .header-info p {
            margin: 5px 0;
            color: #495057;
        }

        /* Test grid - Side-by-side pattern */
        .test-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0 40px 0;
        }

        .test-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 2px solid #dee2e6;
        }

        .test-card.fail {
            border-color: #dc3545;
            background: #fff5f5;
        }

        .test-card.pass {
            border-color: #198754;
            background: #f0fff4;
        }

        .test-card h3 {
            margin-top: 0;
            color: #212529;
            font-size: 1.1rem;
        }

        .test-sample {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin: 15px 0;
            border: 1px solid #dee2e6;
        }

        .test-sample a {
            color: #0d6efd;
            text-decoration: underline;
        }

        .code-block {
            background-color: #2d2d2d;
            color: #d4d4d4;
            padding: 12px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin-top: 12px;
            overflow-x: auto;
        }

        .code-block .tag {
            color: #569cd6;
        }

        .code-block .attr {
            color: #9cdcfe;
        }

        .code-block .string {
            color: #ce9178;
        }

        .code-block .comment {
            color: #6a9955;
        }

        .expected-results {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-top: 40px;
            border: 2px solid #0d6efd;
        }

        .expected-results h3 {
            color: #0d6efd;
            margin-top: 0;
        }

        .expected-results ul {
            margin: 10px 0;
        }

        .expected-results li {
            margin: 8px 0;
            color: #495057;
        }

        .violation-list {
            list-style-type: none;
            padding-left: 20px;
        }

        .violation-list li {
            padding: 5px 0;
            border-left: 3px solid #dc3545;
            padding-left: 10px;
            margin: 5px 0;
            background: #fff5f5;
        }

        .pass-list {
            list-style-type: none;
            padding-left: 20px;
        }

        .pass-list li {
            padding: 5px 0;
            border-left: 3px solid #198754;
            padding-left: 10px;
            margin: 5px 0;
            background: #f0fff4;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîó WCAG 2.4.4 - Link Purpose (In Context) Test Page</h1>

        <div class="header-info"
             data-wcag-criterion="2.4.4"
             data-total-test-cases="10"
             data-expected-violations="5"
             data-expected-passes="5">
            <p><strong>Testing: WCAG 2.4.4 - Link Purpose (In Context) (Level A)</strong></p>
            <p><strong>Requirement:</strong> The purpose of each link can be determined from the link text alone or from the link text together with its programmatically determined link context</p>
            <p><strong>Why it matters:</strong> Screen reader users often navigate by links. Generic link text like "click here" provides no information about the destination.</p>
            <p>This page contains <strong>10 test cases</strong> (5 violations, 5 passes) demonstrating descriptive vs generic link text.</p>
        </div>

        <h2>üîç Test Case 1: "Click Here" Link</h2>
        <div class="test-grid">
            <!-- FAIL: Click here -->
            <div class="test-card fail"
                 data-test-id="TC1.1"
                 data-expected-result="violation"
                 data-wcag-criterion="2.4.4">
                <h3>‚ùå FAIL: Generic "Click Here"</h3>
                <div class="test-sample">
                    <p>Our annual report is now available. <a href="#">Click here</a> to view it.</p>
                </div>
                <p><strong>Issue:</strong> "Click here" doesn't describe destination. Screen reader users navigating by links won't know what it leads to.</p>
                <div class="code-block"><span class="tag">&lt;a</span> <span class="attr">href</span>=<span class="string">"#"</span><span class="tag">&gt;</span>Click here<span class="tag">&lt;/a&gt;</span>
<span class="comment">&lt;!-- Generic, non-descriptive link text --&gt;</span></div>
            </div>

            <!-- PASS: Descriptive text -->
            <div class="test-card pass"
                 data-test-id="TC2.1"
                 data-expected-result="pass"
                 data-wcag-criterion="2.4.4">
                <h3>‚úÖ PASS: Descriptive Link Text</h3>
                <div class="test-sample">
                    <p>Our <a href="#">annual report for 2024</a> is now available.</p>
                </div>
                <p><strong>Why it passes:</strong> Link text clearly describes the destination. Users know they'll get the 2024 annual report.</p>
                <div class="code-block"><span class="tag">&lt;a</span> <span class="attr">href</span>=<span class="string">"#"</span><span class="tag">&gt;</span>annual report for 2024<span class="tag">&lt;/a&gt;</span>
<span class="comment">&lt;!-- Descriptive link text --&gt;</span></div>
            </div>
        </div>

        <h2>üîç Test Case 2: "Read More" Link</h2>
        <div class="test-grid">
            <!-- FAIL: Read more without context -->
            <div class="test-card fail"
                 data-test-id="TC1.2"
                 data-expected-result="violation"
                 data-wcag-criterion="2.4.4">
                <h3>‚ùå FAIL: Generic "Read More"</h3>
                <div class="test-sample">
                    <div>
                        <p>New accessibility features in our product.</p>
                        <a href="#">Read more</a>
                    </div>
                </div>
                <p><strong>Issue:</strong> "Read more" is ambiguous when multiple instances exist. No programmatic association with the heading.</p>
                <div class="code-block"><span class="tag">&lt;div&gt;</span>
  <span class="tag">&lt;p&gt;</span>New features...<span class="tag">&lt;/p&gt;</span>
  <span class="tag">&lt;a</span> <span class="attr">href</span>=<span class="string">"#"</span><span class="tag">&gt;</span>Read more<span class="tag">&lt;/a&gt;</span>
<span class="tag">&lt;/div&gt;</span>
<span class="comment">&lt;!-- No programmatic context --&gt;</span></div>
            </div>

            <!-- PASS: Read more with aria-label -->
            <div class="test-card pass"
                 data-test-id="TC2.2"
                 data-expected-result="pass"
                 data-wcag-criterion="2.4.4">
                <h3>‚úÖ PASS: "Read More" with Context</h3>
                <div class="test-sample">
                    <div>
                        <p>New accessibility features in our product.</p>
                        <a href="#" aria-label="Read more about new accessibility features">Read more</a>
                    </div>
                </div>
                <p><strong>Why it passes:</strong> aria-label provides full context. Screen readers announce "Read more about new accessibility features".</p>
                <div class="code-block"><span class="tag">&lt;a</span> <span class="attr">href</span>=<span class="string">"#"</span>
   <span class="attr">aria-label</span>=<span class="string">"Read more about new accessibility features"</span><span class="tag">&gt;</span>
  Read more
<span class="tag">&lt;/a&gt;</span></div>
            </div>
        </div>

        <h2>üîç Test Case 3: URL as Link Text</h2>
        <div class="test-grid">
            <!-- FAIL: URL as text -->
            <div class="test-card fail"
                 data-test-id="TC1.3"
                 data-expected-result="violation"
                 data-wcag-criterion="2.4.4">
                <h3>‚ùå FAIL: URL as Link Text</h3>
                <div class="test-sample">
                    <p>Visit <a href="#">https://www.example.com/downloads/report-2024.pdf</a> for our report.</p>
                </div>
                <p><strong>Issue:</strong> Long URLs are hard to understand. Screen readers read character by character: "h-t-t-p-s colon slash..."</p>
                <div class="code-block"><span class="tag">&lt;a</span> <span class="attr">href</span>=<span class="string">"..."</span><span class="tag">&gt;</span>https://www.example.com/...<span class="tag">&lt;/a&gt;</span>
<span class="comment">&lt;!-- URL provides no meaningful context --&gt;</span></div>
            </div>

            <!-- PASS: Descriptive text for URL -->
            <div class="test-card pass"
                 data-test-id="TC2.3"
                 data-expected-result="pass"
                 data-wcag-criterion="2.4.4">
                <h3>‚úÖ PASS: Descriptive Text for Document</h3>
                <div class="test-sample">
                    <p><a href="#">Download 2024 Annual Report (PDF, 2.5MB)</a></p>
                </div>
                <p><strong>Why it passes:</strong> Describes what the link does, file type, and size. Much more useful than the URL.</p>
                <div class="code-block"><span class="tag">&lt;a</span> <span class="attr">href</span>=<span class="string">"..."</span><span class="tag">&gt;</span>
  Download 2024 Annual Report (PDF, 2.5MB)
<span class="tag">&lt;/a&gt;</span></div>
            </div>
        </div>

        <h2>üîç Test Case 4: Repeated Generic Links</h2>
        <div class="test-grid">
            <!-- FAIL: Multiple "Learn more" -->
            <div class="test-card fail"
                 data-test-id="TC1.4"
                 data-expected-result="violation"
                 data-wcag-criterion="2.4.4">
                <h3>‚ùå FAIL: Repeated Generic Text</h3>
                <div class="test-sample">
                    <ul>
                        <li>Product A - <a href="#">Learn more</a></li>
                        <li>Product B - <a href="#">Learn more</a></li>
                        <li>Product C - <a href="#">Learn more</a></li>
                    </ul>
                </div>
                <p><strong>Issue:</strong> Multiple identical "Learn more" links. Screen reader users can't distinguish between them.</p>
                <div class="code-block"><span class="tag">&lt;li&gt;</span>Product A - <span class="tag">&lt;a</span> <span class="attr">href</span>=<span class="string">"#"</span><span class="tag">&gt;</span>Learn more<span class="tag">&lt;/a&gt;&lt;/li&gt;</span>
<span class="tag">&lt;li&gt;</span>Product B - <span class="tag">&lt;a</span> <span class="attr">href</span>=<span class="string">"#"</span><span class="tag">&gt;</span>Learn more<span class="tag">&lt;/a&gt;&lt;/li&gt;</span>
<span class="comment">&lt;!-- Identical link text, different destinations --&gt;</span></div>
            </div>

            <!-- PASS: Unique descriptive links -->
            <div class="test-card pass"
                 data-test-id="TC2.4"
                 data-expected-result="pass"
                 data-wcag-criterion="2.4.4">
                <h3>‚úÖ PASS: Unique Link Text</h3>
                <div class="test-sample">
                    <ul>
                        <li><a href="#">Learn more about Product A</a></li>
                        <li><a href="#">Learn more about Product B</a></li>
                        <li><a href="#">Learn more about Product C</a></li>
                    </ul>
                </div>
                <p><strong>Why it passes:</strong> Each link is unique and describes its specific destination.</p>
                <div class="code-block"><span class="tag">&lt;li&gt;&lt;a</span> <span class="attr">href</span>=<span class="string">"#"</span><span class="tag">&gt;</span>Learn more about Product A<span class="tag">&lt;/a&gt;&lt;/li&gt;</span>
<span class="tag">&lt;li&gt;&lt;a</span> <span class="attr">href</span>=<span class="string">"#"</span><span class="tag">&gt;</span>Learn more about Product B<span class="tag">&lt;/a&gt;&lt;/li&gt;</span>
<span class="comment">&lt;!-- Unique, descriptive link text --&gt;</span></div>
            </div>
        </div>

        <h2>üîç Test Case 5: Image Link</h2>
        <div class="test-grid">
            <!-- FAIL: Image without alt text -->
            <div class="test-card fail"
                 data-test-id="TC1.5"
                 data-expected-result="violation"
                 data-wcag-criterion="2.4.4">
                <h3>‚ùå FAIL: Image Link Without Alt Text</h3>
                <div class="test-sample">
                    <a href="#">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='60'%3E%3Crect fill='%23dc3545' width='100' height='60'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='white' font-size='12'%3EReport Icon%3C/text%3E%3C/svg%3E" alt="">
                    </a>
                </div>
                <p><strong>Issue:</strong> Image link with empty alt text. Screen readers announce "link" with no destination information.</p>
                <div class="code-block"><span class="tag">&lt;a</span> <span class="attr">href</span>=<span class="string">"#"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;img</span> <span class="attr">src</span>=<span class="string">"..."</span> <span class="attr">alt</span>=<span class="string">""</span><span class="tag">&gt;</span> <span class="comment">&lt;!-- Empty alt! --&gt;</span>
<span class="tag">&lt;/a&gt;</span></div>
            </div>

            <!-- PASS: Image with descriptive alt -->
            <div class="test-card pass"
                 data-test-id="TC2.5"
                 data-expected-result="pass"
                 data-wcag-criterion="2.4.4">
                <h3>‚úÖ PASS: Image Link with Alt Text</h3>
                <div class="test-sample">
                    <a href="#">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='60'%3E%3Crect fill='%23198754' width='100' height='60'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='white' font-size='12'%3EReport Icon%3C/text%3E%3C/svg%3E" alt="Download Annual Report PDF">
                    </a>
                </div>
                <p><strong>Why it passes:</strong> Alt text describes the link's purpose. Screen readers announce "Download Annual Report PDF, link".</p>
                <div class="code-block"><span class="tag">&lt;a</span> <span class="attr">href</span>=<span class="string">"#"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;img</span> <span class="attr">src</span>=<span class="string">"..."</span> <span class="attr">alt</span>=<span class="string">"Download Annual Report PDF"</span><span class="tag">&gt;</span>
<span class="tag">&lt;/a&gt;</span></div>
            </div>
        </div>

        <!-- Expected Results Section -->
        <div class="expected-results"
             data-total-test-cases="10"
             data-expected-violations="5"
             data-expected-passes="5">

            <h3>üìä Expected Test Results</h3>

            <div class="results-summary">
                <ul>
                    <li><strong>Total Test Cases:</strong> 10</li>
                    <li><strong>Expected Violations:</strong> 5
                        <ul class="violation-list">
                            <li><strong>TC1.1</strong> - Generic "Click here" link text</li>
                            <li><strong>TC1.2</strong> - Generic "Read more" without programmatic context</li>
                            <li><strong>TC1.3</strong> - URL used as link text</li>
                            <li><strong>TC1.4</strong> - Multiple identical "Learn more" links</li>
                            <li><strong>TC1.5</strong> - Image link with empty alt text</li>
                        </ul>
                    </li>
                    <li><strong>Expected Passes:</strong> 5
                        <ul class="pass-list">
                            <li><strong>TC2.1</strong> - Descriptive link text ("annual report for 2024")</li>
                            <li><strong>TC2.2</strong> - "Read more" with aria-label providing context</li>
                            <li><strong>TC2.3</strong> - Descriptive text instead of URL ("Download 2024 Annual Report")</li>
                            <li><strong>TC2.4</strong> - Unique descriptive links ("Learn more about Product A")</li>
                            <li><strong>TC2.5</strong> - Image link with descriptive alt text</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <h4>Detection Method</h4>
            <p><strong>Automated detection can identify:</strong></p>
            <ul>
                <li>Links with generic text patterns: "click here", "read more", "learn more", "link", "more"</li>
                <li>Multiple links with identical text pointing to different destinations</li>
                <li>Links containing only URLs</li>
                <li>Image links with missing or empty alt attributes</li>
                <li>Links with very short text (< 4 characters)</li>
            </ul>

            <h4>Common Generic Link Patterns (to Avoid)</h4>
            <ul>
                <li>"Click here"</li>
                <li>"Read more"</li>
                <li>"Learn more"</li>
                <li>"More"</li>
                <li>"More info"</li>
                <li>"Link"</li>
                <li>"Details"</li>
                <li>"Continue"</li>
                <li>"Go"</li>
                <li>[URL only]</li>
            </ul>

            <h4>Best Practices for Link Text</h4>
            <p><strong>Good link text should:</strong></p>
            <ul>
                <li>Make sense out of context (when reading link list)</li>
                <li>Be unique - avoid identical text for different destinations</li>
                <li>Be concise but descriptive (4-10 words ideal)</li>
                <li>Indicate file format and size for downloads (PDF, 2MB)</li>
                <li>Describe the action or destination, not the mechanism ("Download report" not "Click here")</li>
            </ul>

            <h4>Providing Context</h4>
            <p><strong>Acceptable ways to provide link context:</strong></p>
            <ul>
                <li><strong>Link text alone:</strong> "Download 2024 Annual Report"</li>
                <li><strong>aria-label:</strong> Provides full context to screen readers</li>
                <li><strong>aria-labelledby:</strong> References heading or other element</li>
                <li><strong>Surrounding paragraph:</strong> Link within same &lt;p&gt; element</li>
                <li><strong>List item:</strong> Link within same &lt;li&gt; element</li>
                <li><strong>Table cell:</strong> Link within same &lt;td&gt; or &lt;th&gt;</li>
                <li><strong>Adjacent heading:</strong> Link within element after heading</li>
            </ul>

            <h4>Special Cases</h4>
            <p><strong>Image links:</strong></p>
            <ul>
                <li>Use descriptive alt text on the image</li>
                <li>Alt text should describe link destination, not just image content</li>
                <li>If image has adjacent text, use alt="" on image (link text provides context)</li>
            </ul>

            <p><strong>Icon links:</strong></p>
            <ul>
                <li>Add aria-label: &lt;a href="#" aria-label="Home"&gt;&lt;i class="home-icon"&gt;&lt;/i&gt;&lt;/a&gt;</li>
                <li>Or use visually-hidden text: &lt;a href="#"&gt;&lt;i class="home-icon"&gt;&lt;/i&gt;&lt;span class="sr-only"&gt;Home&lt;/span&gt;&lt;/a&gt;</li>
            </ul>

            <h4>Exception</h4>
            <p>If the link purpose would be ambiguous to users in general (not just to those with disabilities), this criterion is satisfied even if it's ambiguous to screen reader users.</p>
        </div>
    </div>

    <script>
        // Machine-readable test metadata
        window.testMetadata = {
            wcagCriterion: '2.4.4',
            criterionName: 'Link Purpose (In Context)',
            level: 'A',
            totalCases: 10,
            expectedViolations: 5,
            expectedPasses: 5,
            testCases: []
        };

        // Parse all test cases
        document.querySelectorAll('[data-test-id]').forEach(testCard => {
            const testCase = {
                id: testCard.dataset.testId,
                expectedResult: testCard.dataset.expectedResult,
                criterion: testCard.dataset.wcagCriterion
            };
            window.testMetadata.testCases.push(testCase);
        });

        // Export function for validation scripts
        window.getTestMetadata = function() {
            return window.testMetadata;
        };

        console.log('‚úÖ WCAG 2.4.4 - Link Purpose (In Context) test page loaded');
        console.log('üìä Test metadata:', window.testMetadata);
        console.log('üîç Use window.getTestMetadata() to access test data');
        console.log('üîó Key: Link text should describe destination, not just say "click here"');
    </script>
</body>
</html>
